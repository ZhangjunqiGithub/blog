<!DOCTYPE html><html lang="en" data-theme="light"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0,viewport-fit=cover"><title>微信小程序 | 编程分享讨论栈</title><meta name="author" content="JQ Zhang"><meta name="copyright" content="JQ Zhang"><meta name="format-detection" content="telephone=no"><meta name="theme-color" content="#ffffff"><meta name="description" content="设置代理 当我们在自己的电脑上配置了其他代理的时候就会影响到微信开发者工具的使用。所以我们可以将微信开发者工具的代理模式修改为不使用任何代理，勾选后直连网络  创建小程序项目 此步骤不做过多赘述，要注意的就是从官网上找到自己的AppID,然后将自己的AppID填入到对应的位置。  项目结构1、pages：用来存放所有小程序的页面 2、utils：用来存放工具性质的模块（例如：格式化时间的自定义模块">
<meta property="og:type" content="article">
<meta property="og:title" content="微信小程序">
<meta property="og:url" content="https://zhangjunqigithub.github.io/blog/2023/03/18/%E5%BE%AE%E4%BF%A1%E5%B0%8F%E7%A8%8B%E5%BA%8F/index.html">
<meta property="og:site_name" content="编程分享讨论栈">
<meta property="og:description" content="设置代理 当我们在自己的电脑上配置了其他代理的时候就会影响到微信开发者工具的使用。所以我们可以将微信开发者工具的代理模式修改为不使用任何代理，勾选后直连网络  创建小程序项目 此步骤不做过多赘述，要注意的就是从官网上找到自己的AppID,然后将自己的AppID填入到对应的位置。  项目结构1、pages：用来存放所有小程序的页面 2、utils：用来存放工具性质的模块（例如：格式化时间的自定义模块">
<meta property="og:locale" content="en_US">
<meta property="og:image" content="https://tse3-mm.cn.bing.net/th/id/OIP-C.LOf71BExw3XVrRR4z18bmAHaHa?pid=ImgDet&rs=1">
<meta property="article:published_time" content="2023-03-17T16:00:00.000Z">
<meta property="article:modified_time" content="2024-07-03T02:09:31.984Z">
<meta property="article:author" content="JQ Zhang">
<meta property="article:tag" content="微信小程序">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="https://tse3-mm.cn.bing.net/th/id/OIP-C.LOf71BExw3XVrRR4z18bmAHaHa?pid=ImgDet&rs=1"><link rel="shortcut icon" href="https://raw.githubusercontent.com/ZhangjunqiGithub/picture/master/blogAvator.jpg"><link rel="canonical" href="https://zhangjunqigithub.github.io/blog/2023/03/18/%E5%BE%AE%E4%BF%A1%E5%B0%8F%E7%A8%8B%E5%BA%8F/index.html"><link rel="preconnect" href="//cdn.jsdelivr.net"/><link rel="preconnect" href="//busuanzi.ibruce.info"/><link rel="stylesheet" href="/blog/css/index.css?v=4.13.0"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@6.5.1/css/all.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fancyapps/ui@5.0.33/dist/fancybox/fancybox.min.css" media="print" onload="this.media='all'"><script>const GLOBAL_CONFIG = {
  root: '/blog/',
  algolia: {"appId":"DOUQTLBQKA","apiKey":"a9673e873d0aa7a0ce75624b7fb70120","indexName":"my_hexo_blog","hits":{"per_page":6},"languages":{"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}.","hits_stats":"${hits} results found in ${time} ms"}},
  localSearch: undefined,
  translate: undefined,
  noticeOutdate: undefined,
  highlight: {"plugin":"highlight.js","highlightCopy":true,"highlightLang":true,"highlightHeightLimit":false},
  copy: {
    success: 'Copy Successful',
    error: 'Copy Error',
    noSupport: 'Browser Not Supported'
  },
  relativeDate: {
    homepage: false,
    post: false
  },
  runtime: '',
  dateSuffix: {
    just: 'Just now',
    min: 'minutes ago',
    hour: 'hours ago',
    day: 'days ago',
    month: 'months ago'
  },
  copyright: undefined,
  lightbox: 'fancybox',
  Snackbar: undefined,
  infinitegrid: {
    js: 'https://cdn.jsdelivr.net/npm/@egjs/infinitegrid@4.11.1/dist/infinitegrid.min.js',
    buttonText: 'Load More'
  },
  isPhotoFigcaption: false,
  islazyload: false,
  isAnchor: false,
  percent: {
    toc: true,
    rightside: false,
  },
  autoDarkmode: false
}</script><script id="config-diff">var GLOBAL_CONFIG_SITE = {
  title: '微信小程序',
  isPost: true,
  isHome: false,
  isHighlightShrink: false,
  isToc: true,
  postUpdate: '2024-07-03 10:09:31'
}</script><script>(win=>{
      win.saveToLocal = {
        set: (key, value, ttl) => {
          if (ttl === 0) return
          const now = Date.now()
          const expiry = now + ttl * 86400000
          const item = {
            value,
            expiry
          }
          localStorage.setItem(key, JSON.stringify(item))
        },
      
        get: key => {
          const itemStr = localStorage.getItem(key)
      
          if (!itemStr) {
            return undefined
          }
          const item = JSON.parse(itemStr)
          const now = Date.now()
      
          if (now > item.expiry) {
            localStorage.removeItem(key)
            return undefined
          }
          return item.value
        }
      }
    
      win.getScript = (url, attr = {}) => new Promise((resolve, reject) => {
        const script = document.createElement('script')
        script.src = url
        script.async = true
        script.onerror = reject
        script.onload = script.onreadystatechange = function() {
          const loadState = this.readyState
          if (loadState && loadState !== 'loaded' && loadState !== 'complete') return
          script.onload = script.onreadystatechange = null
          resolve()
        }

        Object.keys(attr).forEach(key => {
          script.setAttribute(key, attr[key])
        })

        document.head.appendChild(script)
      })
    
      win.getCSS = (url, id = false) => new Promise((resolve, reject) => {
        const link = document.createElement('link')
        link.rel = 'stylesheet'
        link.href = url
        if (id) link.id = id
        link.onerror = reject
        link.onload = link.onreadystatechange = function() {
          const loadState = this.readyState
          if (loadState && loadState !== 'loaded' && loadState !== 'complete') return
          link.onload = link.onreadystatechange = null
          resolve()
        }
        document.head.appendChild(link)
      })
    
      win.activateDarkMode = () => {
        document.documentElement.setAttribute('data-theme', 'dark')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#0d0d0d')
        }
      }
      win.activateLightMode = () => {
        document.documentElement.setAttribute('data-theme', 'light')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#ffffff')
        }
      }
      const t = saveToLocal.get('theme')
    
        if (t === 'dark') activateDarkMode()
        else if (t === 'light') activateLightMode()
      
      const asideStatus = saveToLocal.get('aside-status')
      if (asideStatus !== undefined) {
        if (asideStatus === 'hide') {
          document.documentElement.classList.add('hide-aside')
        } else {
          document.documentElement.classList.remove('hide-aside')
        }
      }
    
      const detectApple = () => {
        if(/iPad|iPhone|iPod|Macintosh/.test(navigator.userAgent)){
          document.documentElement.classList.add('apple')
        }
      }
      detectApple()
    })(window)</script><meta name="generator" content="Hexo 7.3.0"></head><body><div id="sidebar"><div id="menu-mask"></div><div id="sidebar-menus"><div class="avatar-img is-center"><img src="https://raw.githubusercontent.com/ZhangjunqiGithub/picture/master/blogAvator.jpg" onerror="onerror=null;src='/img/friend_404.gif'" alt="avatar"/></div><div class="sidebar-site-data site-data is-center"><a href="/blog/archives/"><div class="headline">Articles</div><div class="length-num">29</div></a><a href="/blog/tags/"><div class="headline">Tags</div><div class="length-num">29</div></a><a href="/blog/categories/"><div class="headline">Categories</div><div class="length-num">29</div></a></div><hr class="custom-hr"/><div class="menus_items"><div class="menus_item"><a class="site-page" href="/blog/"><i class="fa-fw fas fa-home"></i><span> Home</span></a></div><div class="menus_item"><a class="site-page" href="/blog/archives/"><i class="fa-fw fas fa-archive"></i><span> Archives</span></a></div><div class="menus_item"><a class="site-page" href="/blog/tags/"><i class="fa-fw fas fa-tags"></i><span> Tags</span></a></div><div class="menus_item"><a class="site-page" href="/blog/categories/"><i class="fa-fw fas fa-folder-open"></i><span> Categories</span></a></div></div></div></div><div class="post" id="body-wrap"><header class="post-bg" id="page-header" style="background-image: url('https://tse3-mm.cn.bing.net/th/id/OIP-C.LOf71BExw3XVrRR4z18bmAHaHa?pid=ImgDet&amp;rs=1')"><nav id="nav"><span id="blog-info"><a href="/blog/" title="编程分享讨论栈"><span class="site-name">编程分享讨论栈</span></a></span><div id="menus"><div id="search-button"><a class="site-page social-icon search" href="javascript:void(0);"><i class="fas fa-search fa-fw"></i><span> Search</span></a></div><div class="menus_items"><div class="menus_item"><a class="site-page" href="/blog/"><i class="fa-fw fas fa-home"></i><span> Home</span></a></div><div class="menus_item"><a class="site-page" href="/blog/archives/"><i class="fa-fw fas fa-archive"></i><span> Archives</span></a></div><div class="menus_item"><a class="site-page" href="/blog/tags/"><i class="fa-fw fas fa-tags"></i><span> Tags</span></a></div><div class="menus_item"><a class="site-page" href="/blog/categories/"><i class="fa-fw fas fa-folder-open"></i><span> Categories</span></a></div></div><div id="toggle-menu"><a class="site-page" href="javascript:void(0);"><i class="fas fa-bars fa-fw"></i></a></div></div></nav><div id="post-info"><h1 class="post-title">微信小程序</h1><div id="post-meta"><div class="meta-firstline"><span class="post-meta-date"><i class="far fa-calendar-alt fa-fw post-meta-icon"></i><span class="post-meta-label">Created</span><time class="post-meta-date-created" datetime="2023-03-17T16:00:00.000Z" title="Created 2023-03-18 00:00:00">2023-03-18</time><span class="post-meta-separator">|</span><i class="fas fa-history fa-fw post-meta-icon"></i><span class="post-meta-label">Updated</span><time class="post-meta-date-updated" datetime="2024-07-03T02:09:31.984Z" title="Updated 2024-07-03 10:09:31">2024-07-03</time></span><span class="post-meta-categories"><span class="post-meta-separator">|</span><i class="fas fa-inbox fa-fw post-meta-icon"></i><a class="post-meta-categories" href="/blog/categories/%E5%BE%AE%E4%BF%A1%E5%B0%8F%E7%A8%8B%E5%BA%8F/">微信小程序</a></span></div><div class="meta-secondline"><span class="post-meta-separator">|</span><span class="post-meta-pv-cv" id="" data-flag-title="微信小程序"><i class="far fa-eye fa-fw post-meta-icon"></i><span class="post-meta-label">Post Views:</span><span id="busuanzi_value_page_pv"><i class="fa-solid fa-spinner fa-spin"></i></span></span></div></div></div></header><main class="layout" id="content-inner"><div id="post"><article class="post-content" id="article-container"><h3 id="设置代理"><a href="#设置代理" class="headerlink" title="设置代理"></a>设置代理</h3><blockquote>
<p>当我们在自己的电脑上配置了其他代理的时候就会影响到微信开发者工具的使用。所以我们可以将微信开发者工具的代理模式修改为<code>不使用任何代理，勾选后直连网络</code></p>
</blockquote>
<h3 id="创建小程序项目"><a href="#创建小程序项目" class="headerlink" title="创建小程序项目"></a>创建小程序项目</h3><blockquote>
<p>此步骤不做过多赘述，要注意的就是从官网上找到自己的AppID,然后将自己的AppID填入到对应的位置。</p>
</blockquote>
<h3 id="项目结构"><a href="#项目结构" class="headerlink" title="项目结构"></a>项目结构</h3><p>1、pages：用来存放所有小程序的页面</p>
<p>2、utils：用来存放工具性质的模块（例如：格式化时间的自定义模块）</p>
<p>3、app.js：小程序项目的入口文件</p>
<p>4、app.json：小程序项目的全局配置文件</p>
<p>5、app.wxss：小程序项目的全局样式文件</p>
<p>6、project.config.json：项目的配置文件</p>
<p>7、sitemap.json：用来配置小程序及其页面是否允许被微信索引</p>
<p><strong>sitemap.json：</strong></p>
<figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="punctuation">&#123;</span></span><br><span class="line">    <span class="attr">&quot;desc&quot;</span><span class="punctuation">:</span> <span class="string">&quot;关于本文件的更多信息，请参考文档 https://developers.weixin.qq.com/miniprogram/dev/framework/sitemap.html&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;rules&quot;</span><span class="punctuation">:</span> <span class="punctuation">[</span><span class="punctuation">&#123;</span></span><br><span class="line">    <span class="attr">&quot;action&quot;</span><span class="punctuation">:</span> <span class="string">&quot;allow&quot;</span><span class="punctuation">,</span><span class="comment">//所有页面都可以被索引，disallow所有页面都可以不被索引</span></span><br><span class="line">    <span class="attr">&quot;page&quot;</span><span class="punctuation">:</span> <span class="string">&quot;*&quot;</span><span class="comment">//该规则生效的页面</span></span><br><span class="line">    <span class="punctuation">&#125;</span><span class="punctuation">]</span></span><br><span class="line"><span class="punctuation">&#125;</span></span><br></pre></td></tr></table></figure>

<h3 id="新建小程序页面"><a href="#新建小程序页面" class="headerlink" title="新建小程序页面"></a>新建小程序页面</h3><blockquote>
<p>找到相应的配置文件（微信开发者工具是app.json;Hbulidx是pages.json）在其中的pages对象下按照给定规则新增页面配置，保存后，开发者工具中就会自动新增一个页面文件夹</p>
</blockquote>
<h3 id="修改项目首页"><a href="#修改项目首页" class="headerlink" title="修改项目首页"></a>修改项目首页</h3><p>只需要调整相应配置文件中pages数组中页面路径的前后顺序，即可修改项目的首页。小程序会把排在第一个位的页面，当作项目首页进行渲染。</p>
<h3 id="wxss和css的区别"><a href="#wxss和css的区别" class="headerlink" title="wxss和css的区别"></a>wxss和css的区别</h3><p>1、新增了rpx尺寸单位</p>
<p>​		CSS中需要手动进行像素单位换算，例如 rem</p>
<p>​		WXSS在底层支持新的尺寸单位rpx，在不同大小的屏幕上小程序会自动进行换算</p>
<p>2、提供了全局的样式和局部样式 </p>
<p>​		项目根目录中的app.wxss会作用于所有小程序页面</p>
<p>​		局部页面的.wxss样式仅对当前页面生效</p>
<p>3、WXSS仅支持部分CSS选择器</p>
<p>​		.class 和 #id</p>
<p>​		element</p>
<p>​		并集选择器、后代选择器</p>
<p>​		<code>::after</code> 和 <code>::before</code> 等伪类选择器</p>
<h3 id="常用的视图容器类组件"><a href="#常用的视图容器类组件" class="headerlink" title="常用的视图容器类组件"></a>常用的视图容器类组件</h3><p><strong>view:</strong></p>
<p>​		1、普通视图区域</p>
<p>​		2、类似于HTML中的div，是一个块级元素</p>
<p>​		3、常用来实现页面的布局效果</p>
<p><strong>scroll-view:</strong></p>
<p>​		1、可滚动的视图区域</p>
<p>​		2、常用来实现滚动列表效果</p>
<blockquote>
<p>例：<code>&lt;scroll-view class=&quot;container&quot; scroll-y&gt;</code></p>
<p>注意：使用时一定要给定该容器一个固定的高度</p>
<p>scroll-x：横向滚动</p>
<p>scroll-y：纵向滚动</p>
</blockquote>
<p><strong>swiper和swiper-item:</strong></p>
<p>​		1、轮播图容器组件和轮播图item组件</p>
<p><strong>基本使用：</strong></p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!-- indicator-dots 属性：显示面板指示点  --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">swiper</span> <span class="attr">class</span>=<span class="string">&quot;swiper-container&quot;</span> <span class="attr">indicator-dots</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- 第1项 --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">swiper-item</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">view</span> <span class="attr">class</span>=<span class="string">&quot;item&quot;</span>&gt;</span>1<span class="tag">&lt;/<span class="name">view</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">swiper-item</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- 第2项 --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">swiper-item</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">view</span> <span class="attr">class</span>=<span class="string">&quot;item&quot;</span>&gt;</span>2<span class="tag">&lt;/<span class="name">view</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">swiper-item</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- 第3项 --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">swiper-item</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">view</span> <span class="attr">class</span>=<span class="string">&quot;item&quot;</span>&gt;</span>3<span class="tag">&lt;/<span class="name">view</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">swiper-item</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">swiper</span>&gt;</span></span><br></pre></td></tr></table></figure>

<table>
<thead>
<tr>
<th>属性</th>
<th>类型</th>
<th>默认值</th>
<th>说明</th>
</tr>
</thead>
<tbody><tr>
<td>indicator-dots</td>
<td>boolean</td>
<td>false</td>
<td>是否显示面板指示点</td>
</tr>
<tr>
<td>indicator-color</td>
<td>color</td>
<td>rgba(0,0,0,.3)</td>
<td>指示点颜色</td>
</tr>
<tr>
<td>indicator-active-color</td>
<td>color</td>
<td>#000000</td>
<td>当前选中的指示点颜色</td>
</tr>
<tr>
<td>autoplay</td>
<td>boolean</td>
<td>false</td>
<td>是否自动切换</td>
</tr>
<tr>
<td>interval</td>
<td>number</td>
<td>5000</td>
<td>自动切换时间间隔</td>
</tr>
<tr>
<td>circular</td>
<td>boolean</td>
<td>false</td>
<td>是否采用衔接滑动</td>
</tr>
</tbody></table>
<h3 id="常用的基础内容组件"><a href="#常用的基础内容组件" class="headerlink" title="常用的基础内容组件"></a>常用的基础内容组件</h3><p><strong>1、text</strong></p>
<p>​		文本组件</p>
<p>​		类似于HTML中的span标签，是一个行内元素</p>
<p><strong>实现长按选中的效果：</strong><code>&lt;text selectable&gt;内容&lt;/text&gt;</code></p>
<p><strong>2、rich-text</strong></p>
<p>​		富文本组件</p>
<p>​		支持把HTML字符串渲染为WXML结构</p>
<p><strong>基本使用：</strong></p>
<p><code>&lt;rich-text nodes=&quot;&lt;h1 style=&#39;color: red;&#39;&gt;内容&lt;/h1&gt;&quot;&gt;&lt;/rich-text&gt;</code></p>
<blockquote>
<p>注意这里的<code>nodes</code>属性</p>
</blockquote>
<p><strong>各组件使用文档：</strong><a target="_blank" rel="noopener" href="https://developers.weixin.qq.com/miniprogram/dev/component/">视图容器 | 微信开放文档 (qq.com)</a></p>
<h3 id="小程序API的3大分类"><a href="#小程序API的3大分类" class="headerlink" title="小程序API的3大分类"></a>小程序API的3大分类</h3><p>1、事件监听API</p>
<p>​		特点：以on开头，用来监听某些事件的触发</p>
<p>​		例如：wx.onWindowResize(function callback)监听窗口尺寸变化的事件</p>
<p>2、同步API</p>
<p>​		特点1：以Sync结尾的API都是同步API</p>
<p>​		特点2：同步API的执行结果，可以通过函数返回值直接获取，如果执行出错会抛出异常</p>
<p>​		例如：wx.setStorageSync(‘key’, ‘value’)向本地存储中写入内容</p>
<p>3、异步API</p>
<p>​		特点：类似于jQuery中的$.ajax(options)函数，需要通过success、fail、complete接收调用的结果</p>
<p>​		例如：wx.request()发起网络数据请求，通过success回调函数接收数据</p>
<h3 id="小程序发布上线"><a href="#小程序发布上线" class="headerlink" title="小程序发布上线"></a>小程序发布上线</h3><p>上传代码—&gt;提交审核—&gt;发布</p>
<h3 id="数据绑定"><a href="#数据绑定" class="headerlink" title="数据绑定"></a>数据绑定</h3><p>于Vue不同，在小程序中使用mustache语法来绑定数据</p>
<p>例如：<code>&lt;image src=&quot;&#123;&#123;imgSrc&#125;&#125;&quot;&gt;&lt;/image&gt;</code></p>
<h3 id="三元运算符"><a href="#三元运算符" class="headerlink" title="三元运算符"></a>三元运算符</h3><blockquote>
<p>小程序的mustache语法<code>&#123;&#123;xxx ? xxx : xxx&#125;&#125;</code>中可以写三元运算符</p>
</blockquote>
<h3 id="常用的事件"><a href="#常用的事件" class="headerlink" title="常用的事件"></a>常用的事件</h3><table>
<thead>
<tr>
<th>类型</th>
<th>绑定方式</th>
<th>事件描述</th>
</tr>
</thead>
<tbody><tr>
<td>tap</td>
<td>bindtap或bind:tap</td>
<td>手指触摸后马上离开，类似于HTML中的click事件</td>
</tr>
<tr>
<td>input</td>
<td>bindinput或bind:input</td>
<td>文本框的输入事件</td>
</tr>
<tr>
<td>change</td>
<td>bindchange或bind:change</td>
<td>状态改变时触发</td>
</tr>
</tbody></table>
<h3 id="事件对象的属性列表"><a href="#事件对象的属性列表" class="headerlink" title="事件对象的属性列表"></a>事件对象的属性列表</h3><p>当事件回调触发的时候，会收到一个事件对象event,它的详细属性如下表所示：</p>
<table>
<thead>
<tr>
<th>属性</th>
<th>类型</th>
<th>说明</th>
</tr>
</thead>
<tbody><tr>
<td>type</td>
<td>String</td>
<td>数据类型</td>
</tr>
<tr>
<td>timeStamp</td>
<td>Integer</td>
<td>页面打开到触发事件所经过的毫秒数</td>
</tr>
<tr>
<td>target</td>
<td>Object</td>
<td>触发事件的组件的一些属性值集合（触发该事件的源头组件）</td>
</tr>
<tr>
<td>currentTarget</td>
<td>Object</td>
<td>当前组件的一些属性值集合（当前事件所绑定的组件）</td>
</tr>
<tr>
<td>detail</td>
<td>Object</td>
<td>额外的信息</td>
</tr>
<tr>
<td>touches</td>
<td>Array</td>
<td>触发事件，当前停留在屏幕中的触摸点信息的数组</td>
</tr>
<tr>
<td>changedTouches</td>
<td>Array</td>
<td>触摸事件，当前变化的触摸点信息的数组</td>
</tr>
</tbody></table>
<h3 id="bindtap的语法格式"><a href="#bindtap的语法格式" class="headerlink" title="bindtap的语法格式"></a>bindtap的语法格式</h3><p>在小程序中，不存在HTML中的onclick鼠标点击事件，而是通过tap事件来响应用户的触摸行为。</p>
<p>1、通过bindtap，可以为组件绑定tap触摸事件，语法如下：</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">button</span> <span class="attr">type</span>=<span class="string">&quot;primary&quot;</span> <span class="attr">bindtap</span>=<span class="string">&quot;btnTapHandler&quot;</span>&gt;</span>按钮<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>2、在页面的.js文件中定义对应的事件处理函数，事件参数通过形参event（一般简写成e）来接收：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="title class_">Page</span>(&#123;</span><br><span class="line">    <span class="title function_">btnTapHandler</span>(<span class="params">e</span>) &#123;<span class="comment">//按钮的tap事件处理函数</span></span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">log</span>(e) <span class="comment">//事件参数对象e</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>

<h3 id="在事件处理函数中为data中的数据赋值"><a href="#在事件处理函数中为data中的数据赋值" class="headerlink" title="在事件处理函数中为data中的数据赋值"></a>在事件处理函数中为data中的数据赋值</h3><p>通过调用this.setData(dataObject)方法，可以给页面data中的数据重新赋值，示例如下：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//页面的 .js文件</span></span><br><span class="line"><span class="title class_">Page</span>(&#123;</span><br><span class="line">    <span class="attr">data</span>: &#123;</span><br><span class="line">        <span class="attr">count</span>: <span class="number">0</span>;</span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="comment">//修改count的值</span></span><br><span class="line">    <span class="title function_">changeCount</span>(<span class="params"></span>) &#123;</span><br><span class="line">        <span class="variable language_">this</span>.<span class="title function_">setData</span>(&#123;</span><br><span class="line">            <span class="attr">count</span>: <span class="variable language_">this</span>.<span class="property">data</span>.<span class="property">count</span> + <span class="number">1</span></span><br><span class="line">        &#125;)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>

<h3 id="事件传参与数据同步"><a href="#事件传参与数据同步" class="headerlink" title="事件传参与数据同步"></a>事件传参与数据同步</h3><p>小程序中的事件传参比较特殊，不能在绑定事件的同时为事件处理函数传递参数。例如，下面的代码将不能正常工作：</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">button</span> <span class="attr">type</span>=<span class="string">&quot;primary&quot;</span> <span class="attr">bindtap</span>=<span class="string">&#x27;btnHandler(123)&#x27;</span>&gt;</span>事件传参<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>因为小程序会把bindtap的属性值，同一当作事件名称来处理，相当于要调用一个名称为btnHandler(123)的事件处理函数。</p>
<p>可以为组件提供data-*自定义属性传参，其中<code>*</code>代表的是参数的名字，示例代码如下：</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">button</span> <span class="attr">bindtap</span>=<span class="string">&quot;btnHandler&quot;</span> <span class="attr">data-info</span>=<span class="string">&quot;&#123;&#123;2&#125;&#125;&quot;</span>&gt;</span>事件传参<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>最终：</p>
<p>1、info会解析为参数的名字</p>
<p>2、数值2会被解析为参数的值</p>
<p>在事件处理函数中，通过event.target.dataset.参数名 即可获取到具体参数的值，示例代码如下：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="title function_">btnHandler</span>(<span class="params">event</span>) &#123;</span><br><span class="line">    <span class="comment">//dataset是一个对象，包含了所有通过data-*传递过来的参数项</span></span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(event.<span class="property">target</span>.<span class="property">dataset</span>)</span><br><span class="line">    <span class="comment">//通过dataset可以访问到具体参数的值</span></span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(event.<span class="property">target</span>.<span class="property">dataset</span>.<span class="property">info</span>)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="条件渲染"><a href="#条件渲染" class="headerlink" title="条件渲染"></a>条件渲染</h3><h4 id="wx-if"><a href="#wx-if" class="headerlink" title="wx:if"></a>wx:if</h4><blockquote>
<p>在小程序中，使用wx:if&#x3D;”“ True </view></p>
</blockquote>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">view</span> <span class="attr">wx:if</span>=<span class="string">&quot;&#123;&#123;condition&#125;&#125;&quot;</span>&#125;&gt;</span> True <span class="tag">&lt;/<span class="name">view</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>也可以用wx:elif和wx:else来添加else判断：</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">view</span> <span class="attr">wx:if</span>=<span class="string">&#123;&#123;type</span> === <span class="string">1&#125;&#125;</span>&gt;</span> 男 <span class="tag">&lt;/<span class="name">view</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">view</span> <span class="attr">wx:elif</span>=<span class="string">&#123;&#123;type</span> === <span class="string">2&#125;&#125;</span>&gt;</span> 女 <span class="tag">&lt;/<span class="name">view</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">view</span> <span class="attr">wsx:else</span>&gt;</span> xxx <span class="tag">&lt;/<span class="name">view</span>&gt;</span></span><br></pre></td></tr></table></figure>

<blockquote>
<p>注意：此处和其他编程语言使用if 和 else 方法一样。</p>
</blockquote>
<h4 id="结合使用wx-if"><a href="#结合使用wx-if" class="headerlink" title="结合&lt;block&gt;使用wx:if"></a>结合<code>&lt;block&gt;</code>使用wx:if</h4><blockquote>
<p>如果要一次性控制多个组件的展示与隐藏，可以使用一个<code>&lt;block&gt;&lt;/block&gt;</code>标签将多个组件包装起来，并在<code>&lt;block&gt;</code>标签上使用wx:if控制属性，示例如下：</p>
</blockquote>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">block</span> <span class="attr">wx:if</span>=<span class="string">&quot;&#123;&#123;true&#125;&#125;&gt;</span></span></span><br><span class="line"><span class="string"><span class="tag">	&lt;view&gt; view1 &lt;/view&gt;</span></span></span><br><span class="line"><span class="string"><span class="tag">    &lt;view&gt; view2 &lt;/view&gt;</span></span></span><br><span class="line"><span class="string"><span class="tag">&lt;/block&gt;</span></span></span><br></pre></td></tr></table></figure>

<blockquote>
<p>注意：<code>&lt;block&gt;</code>并不是一个组件，它只是一个包裹性质的容器，不会再页面中做任何渲染</p>
</blockquote>
<h4 id="hidden"><a href="#hidden" class="headerlink" title="hidden"></a>hidden</h4><blockquote>
<p>在小程序中，直接使用hidden&#x3D;”“也能控制元素的显示与隐藏</p>
</blockquote>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">view</span> <span class="attr">hidden</span>=<span class="string">&quot;&#123;&#123;condition&#125;&#125;&quot;</span>&gt;</span> 条件为true隐藏，条件为false显示 <span class="tag">&lt;/<span class="name">view</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h4 id="wx-if-与-hidden-的对比"><a href="#wx-if-与-hidden-的对比" class="headerlink" title="wx:if 与 hidden 的对比"></a>wx:if 与 hidden 的对比</h4><p>1、运行方式不同</p>
<p>wx:if 以动态创建和移除元素的方式，控制元素的展示与隐藏</p>
<p>hidden以切换样式的方式(display: none&#x2F;block;)，控制样式的显示与隐藏</p>
<p>2、使用建议：</p>
<p>频繁切换时，建议使用hidden</p>
<p>控制条件复杂时，建议使用wx:if搭配wx:elif、wx:else进行展示与隐藏的切换</p>
<h3 id="列表渲染"><a href="#列表渲染" class="headerlink" title="列表渲染"></a>列表渲染</h3><h4 id="wx-for"><a href="#wx-for" class="headerlink" title="wx:for"></a>wx:for</h4><p>通过wx:for可以根据指定的数组，循环渲染重复的组件结构，语法示例如下：</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">view</span> <span class="attr">wx:for</span>=<span class="string">&quot;&#123;&#123;array&#125;&#125;&quot;</span>&gt;</span></span><br><span class="line">	索引是：&#123;&#123;index&#125;&#125; 当前项是：&#123;&#123;item&#125;&#125;</span><br><span class="line"><span class="tag">&lt;/<span class="name">view</span>&gt;</span></span><br></pre></td></tr></table></figure>

<blockquote>
<p>默认情况下，当前循环项的索引用index表示；当前循环项用item表示</p>
</blockquote>
<h4 id="手动指定索引和当前项的变量名"><a href="#手动指定索引和当前项的变量名" class="headerlink" title="手动指定索引和当前项的变量名"></a>手动指定索引和当前项的变量名</h4><p>使用wx:for-index 可以指定当前循环项的索引的变量名</p>
<p>使用wx:for-item 可以指定当前项的变量名</p>
<p>示例代码如下：</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">view</span> <span class="attr">wx:for</span>=<span class="string">&quot;&#123;&#123;array&#125;&#125;&quot;</span> <span class="attr">wx:for-index</span>=</span></span><br><span class="line"><span class="tag"><span class="string">&quot;idx&quot;</span> <span class="attr">wx:for-item</span>=<span class="string">&quot;itemName&quot;</span>&gt;</span></span><br><span class="line">	索引是：&#123;&#123;idx&#125;&#125; 当前项是：&#123;&#123;itemName&#125;&#125;</span><br><span class="line"><span class="tag">&lt;/<span class="name">view</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h4 id="wx-key的使用"><a href="#wx-key的使用" class="headerlink" title="wx:key的使用"></a>wx:key的使用</h4><blockquote>
<p>类似于Vue列表渲染中的:key，小程序在实现列表渲染时，也建议为渲染出来的列表项指定唯一的key值，从而提高渲染的效率，示例代码如下：</p>
</blockquote>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">//data 数据</span><br><span class="line">data: &#123;</span><br><span class="line">	userList: [</span><br><span class="line">		&#123;id:1, name:&#x27;001&#x27;&#125;,</span><br><span class="line">		&#123;id:2, name:&#x27;002&#x27;&#125;,</span><br><span class="line">		&#123;id:3, name:&#x27;003&#x27;&#125;</span><br><span class="line">	]</span><br><span class="line">&#125;</span><br><span class="line">//wxml 结构</span><br><span class="line"><span class="tag">&lt;<span class="name">view</span> <span class="attr">wx:for</span>=<span class="string">&quot;&#123;&#123;userList&#125;&#125;&quot;</span> <span class="attr">wx:key</span>=<span class="string">&quot;id&quot;</span>&gt;</span> &#123;&#123;item.name&#125;&#125; <span class="tag">&lt;/<span class="name">view</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h3 id="wxss"><a href="#wxss" class="headerlink" title="wxss"></a>wxss</h3><blockquote>
<p>wxss具有css大部分特性，同时，wxss还对css进行了扩充以及修改，以适应微信小程序的开发。与css相比，wxss扩展的特性有：</p>
<p>rpx尺寸单位</p>
<p>@import样式导入</p>
</blockquote>
<h4 id="wxss中的rpx单位"><a href="#wxss中的rpx单位" class="headerlink" title="wxss中的rpx单位"></a>wxss中的rpx单位</h4><blockquote>
<p>rpx(responsive pixel) 时微信小程序独有的，用来解决屏幕适配的尺寸单位</p>
</blockquote>
<p><strong>实现原理</strong></p>
<p>rpx的实现原理非常简单：鉴于不同设备屏幕的大小不同，为了实现屏幕的自动适配，rpx吧所有设备的屏幕，在宽度上等分为750份（即：当前屏幕的总宽度为750rpx）</p>
<blockquote>
<p>在较小的设备上，1rpx所代表的宽度较小</p>
</blockquote>
<blockquote>
<p>在较大的设备上，1rpx所代表的宽度较大</p>
</blockquote>
<p>小程序在不同的设备上运行的时候，会自动把rpx的样式单位换算成对应的像素单位来渲染，从而实现屏幕的适配</p>
<p><strong>px与px之间的单位换算</strong></p>
<p>在iPhone6上，屏幕宽度为375px,共有750个物理像素，等分为750rpx。则：750rpx &#x3D; 375px &#x3D; 750 物理像素</p>
<table>
<thead>
<tr>
<th>设备</th>
<th>rpx换算px(屏幕宽度&#x2F;750)</th>
<th>px换算rpx（750&#x2F;屏幕宽度）</th>
</tr>
</thead>
<tbody><tr>
<td>iPhone5</td>
<td>1rpx &#x3D; 0.42px</td>
<td>1px &#x3D; 2.34rpx</td>
</tr>
<tr>
<td>iPhone6</td>
<td>1rpx &#x3D; 0.5px</td>
<td>1px &#x3D; 2rpx</td>
</tr>
<tr>
<td>iPhone6 Plus</td>
<td>1rpx &#x3D; 0.552px</td>
<td>1px &#x3D; 1.81rpx</td>
</tr>
</tbody></table>
<blockquote>
<p>官方建议：开发微信小程序时，设计师可以用iPhone6作为视觉稿的标准。</p>
</blockquote>
<p><strong>wxss中的样式导入</strong></p>
<blockquote>
<p>使用WXSS提供的@import语法，可以导入外联的样式表</p>
</blockquote>
<p>@import后跟需要导入的外联样式表的相对路径，用；表示语句结束。示例如下：</p>
<p><strong>common.wxss:</strong></p>
<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.small-p</span> &#123;</span><br><span class="line">    <span class="attribute">padding</span>: <span class="number">5px</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><strong>app.wxss</strong></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">@import &quot;common.wxss&quot;;</span><br><span class="line">.middle-p &#123;</span><br><span class="line">	padding: 15px;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="wxss全局样式与局部样式"><a href="#wxss全局样式与局部样式" class="headerlink" title="wxss全局样式与局部样式"></a>wxss全局样式与局部样式</h4><p><strong>1.局部样式</strong></p>
<blockquote>
<p>定义在app.wxss中的样式为全局样式，作用于每一个页面</p>
</blockquote>
<p><strong>2.局部样式</strong></p>
<blockquote>
<p>在页面的.wxss文件中定义的样式为局部样式，只作用于当前页面。</p>
<blockquote>
<p>注意：</p>
<p>1、当局部样式和全局样式冲突时，根据就近原则，局部样式会覆盖全局样式</p>
<p>2、当局部样式的权重大于或等于全局样式的权重时，才会覆盖全局的样式</p>
</blockquote>
</blockquote>
<h3 id="全局配置"><a href="#全局配置" class="headerlink" title="全局配置"></a>全局配置</h3><blockquote>
<p>小程序根目录下的app.json文件是小程序的全局配置文件。常用的配置项如下：</p>
<table>
<thead>
<tr>
<th>pages</th>
<th>记录当前小程序所有页面的存放路径</th>
</tr>
</thead>
<tbody><tr>
<td>window</td>
<td>全局设置小程序窗口的外观</td>
</tr>
<tr>
<td>tabBar</td>
<td>设置小程序底部的tabBar效果</td>
</tr>
<tr>
<td>style</td>
<td>是否启用新版的组件样式</td>
</tr>
</tbody></table>
</blockquote>
<p><strong>了解window结点常用的配置项</strong></p>
<table>
<thead>
<tr>
<th>属性名</th>
<th>类型</th>
<th>默认值</th>
<th>说明</th>
</tr>
</thead>
<tbody><tr>
<td>navigationBarTitleText</td>
<td>String</td>
<td>字符串</td>
<td>导航栏标题文字内容</td>
</tr>
<tr>
<td>navigationBarBackgroundColor</td>
<td>HexColor</td>
<td>#000000</td>
<td>导航栏背景颜色，如#000000（不能这样写:red）</td>
</tr>
<tr>
<td>navigationBarTextStyle</td>
<td>String</td>
<td>white</td>
<td>导航栏标题颜色，仅支持black&#x2F;white</td>
</tr>
<tr>
<td>backgroundColor</td>
<td>HexColor</td>
<td>#ffffff</td>
<td>下拉刷新时，显示出来的窗口的背景色</td>
</tr>
<tr>
<td>backgroundTextStyle</td>
<td>String</td>
<td>dark</td>
<td>下拉loading的样式，仅支持dark&#x2F;light(三个小圆点的颜色)</td>
</tr>
<tr>
<td>enablePullDownRefresh</td>
<td>Boolean</td>
<td>false</td>
<td>是否全局开启下拉刷新</td>
</tr>
<tr>
<td>onReachBottomDistance</td>
<td>Number</td>
<td>50</td>
<td>页面上拉触底事件触发时距页面底部距离，单位为px</td>
</tr>
</tbody></table>
<h4 id="tabBar结点的配置项"><a href="#tabBar结点的配置项" class="headerlink" title="tabBar结点的配置项"></a>tabBar结点的配置项</h4><table>
<thead>
<tr>
<th>属性</th>
<th>类型</th>
<th>必填</th>
<th>默认值</th>
<th>描述</th>
</tr>
</thead>
<tbody><tr>
<td>position</td>
<td>String</td>
<td>否</td>
<td>bottom</td>
<td>tabBar的位置，仅支持bottom&#x2F;top</td>
</tr>
<tr>
<td>borderStyle</td>
<td>String</td>
<td>否</td>
<td>black</td>
<td>tabBar上边框的颜色，仅支持black&#x2F;white</td>
</tr>
<tr>
<td>color</td>
<td>HexColor</td>
<td>否</td>
<td></td>
<td>tab上文字的默认（未选中）颜色</td>
</tr>
<tr>
<td>selectedColor</td>
<td>HexColor</td>
<td>否</td>
<td></td>
<td>tab上的文字选中时的颜色</td>
</tr>
<tr>
<td>backgroundColor</td>
<td>HexColor</td>
<td>否</td>
<td></td>
<td>tabBar的背景色</td>
</tr>
<tr>
<td><code>list</code></td>
<td><code>Array</code></td>
<td><code>是</code></td>
<td></td>
<td><code>tab页签中的列表，最少2个，最多5个tab</code></td>
</tr>
</tbody></table>
<h4 id="每个tab项的配置选项"><a href="#每个tab项的配置选项" class="headerlink" title="每个tab项的配置选项"></a>每个tab项的配置选项</h4><table>
<thead>
<tr>
<th>属性</th>
<th>类型</th>
<th>必填</th>
<th>描述</th>
</tr>
</thead>
<tbody><tr>
<td>pagePath</td>
<td>String</td>
<td>是</td>
<td>页面路径，页面必须在pages中预先定义</td>
</tr>
<tr>
<td>text</td>
<td>String</td>
<td>是</td>
<td>tab上显示的文字</td>
</tr>
<tr>
<td>iconPath</td>
<td>String</td>
<td>否</td>
<td>未选中时的图标路径；当position为top时，不显示icon</td>
</tr>
<tr>
<td>selectedIconPath</td>
<td>String</td>
<td>否</td>
<td>选中时的图标路径；当position为top时，不显示icon</td>
</tr>
</tbody></table>
<figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">&quot;tabBar&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">       <span class="attr">&quot;selectedColor&quot;</span><span class="punctuation">:</span> <span class="string">&quot;#FFC0CB&quot;</span><span class="punctuation">,</span></span><br><span class="line">       <span class="attr">&quot;list&quot;</span><span class="punctuation">:</span> <span class="punctuation">[</span></span><br><span class="line">           <span class="punctuation">&#123;</span></span><br><span class="line">               <span class="attr">&quot;pagePath&quot;</span><span class="punctuation">:</span> <span class="string">&quot;pages/home/home&quot;</span><span class="punctuation">,</span></span><br><span class="line">               <span class="attr">&quot;text&quot;</span><span class="punctuation">:</span> <span class="string">&quot;首页&quot;</span><span class="punctuation">,</span></span><br><span class="line">               <span class="attr">&quot;iconPath&quot;</span><span class="punctuation">:</span> <span class="string">&quot;static/tab_icons/home1.png&quot;</span><span class="punctuation">,</span></span><br><span class="line">               <span class="attr">&quot;selectedIconPath&quot;</span><span class="punctuation">:</span> <span class="string">&quot;static/tab_icons/home2.png&quot;</span></span><br><span class="line">           <span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line">           <span class="punctuation">&#123;</span></span><br><span class="line">               <span class="attr">&quot;pagePath&quot;</span><span class="punctuation">:</span> <span class="string">&quot;pages/cate/cate&quot;</span><span class="punctuation">,</span></span><br><span class="line">               <span class="attr">&quot;text&quot;</span><span class="punctuation">:</span> <span class="string">&quot;分类&quot;</span><span class="punctuation">,</span></span><br><span class="line">               <span class="attr">&quot;iconPath&quot;</span><span class="punctuation">:</span> <span class="string">&quot;static/tab_icons/cate1.png&quot;</span><span class="punctuation">,</span></span><br><span class="line">               <span class="attr">&quot;selectedIconPath&quot;</span><span class="punctuation">:</span> <span class="string">&quot;static/tab_icons/cate2.png&quot;</span></span><br><span class="line">           <span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line">           <span class="punctuation">&#123;</span></span><br><span class="line">               <span class="attr">&quot;pagePath&quot;</span><span class="punctuation">:</span> <span class="string">&quot;pages/cart/cart&quot;</span><span class="punctuation">,</span></span><br><span class="line">               <span class="attr">&quot;text&quot;</span><span class="punctuation">:</span> <span class="string">&quot;购物车&quot;</span><span class="punctuation">,</span></span><br><span class="line">               <span class="attr">&quot;iconPath&quot;</span><span class="punctuation">:</span> <span class="string">&quot;static/tab_icons/cart1.png&quot;</span><span class="punctuation">,</span></span><br><span class="line">               <span class="attr">&quot;selectedIconPath&quot;</span><span class="punctuation">:</span> <span class="string">&quot;static/tab_icons/cart2.png&quot;</span></span><br><span class="line">           <span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line">           <span class="punctuation">&#123;</span></span><br><span class="line">               <span class="attr">&quot;pagePath&quot;</span><span class="punctuation">:</span> <span class="string">&quot;pages/my/my&quot;</span><span class="punctuation">,</span></span><br><span class="line">               <span class="attr">&quot;text&quot;</span><span class="punctuation">:</span> <span class="string">&quot;我的&quot;</span><span class="punctuation">,</span></span><br><span class="line">               <span class="attr">&quot;iconPath&quot;</span><span class="punctuation">:</span> <span class="string">&quot;static/tab_icons/my1.png&quot;</span><span class="punctuation">,</span></span><br><span class="line">               <span class="attr">&quot;selectedIconPath&quot;</span><span class="punctuation">:</span> <span class="string">&quot;static/tab_icons/my2.png&quot;</span></span><br><span class="line">           <span class="punctuation">&#125;</span></span><br><span class="line">       <span class="punctuation">]</span></span><br><span class="line">   <span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br></pre></td></tr></table></figure>

<h4 id="页面配置和全局配置的关系"><a href="#页面配置和全局配置的关系" class="headerlink" title="页面配置和全局配置的关系"></a>页面配置和全局配置的关系</h4><p>小程序中，app.json中的window结点，可以全局配置小程序中每个页面的窗口表现。如果某些小程序页面想要拥有特殊的窗口表现，此时，“页面级别的.json配置文件”就可以实现这种需求。</p>
<blockquote>
<p>注意：当页面配置与全局配置冲突时，根据就近原则，最终的效果以页面配置为准。</p>
</blockquote>
<h3 id="小程序中网络数据请求的限制"><a href="#小程序中网络数据请求的限制" class="headerlink" title="小程序中网络数据请求的限制"></a>小程序中网络数据请求的限制</h3><p>出于安全性方面的考虑，小程序官方对数据接口的请求做出了如下两个限制：</p>
<p>1、只能请求HTTPS类型的接口</p>
<p>2、必须将接口的域名添加到信任列表中</p>
<p><img src="https://raw.githubusercontent.com/ZhangjunqiGithub/picture/master/wx_request.jpg"></p>
<p><strong>配置request合法域名的步骤：</strong></p>
<blockquote>
<p>登录微信小程序管理后台—&gt;开发—&gt;开发设置—&gt;服务器域名—&gt;修改request合法域名</p>
</blockquote>
<p><img src="https://raw.githubusercontent.com/ZhangjunqiGithub/picture/master/wx_request2.jpg"></p>
<h3 id="发起GET-POST请求"><a href="#发起GET-POST请求" class="headerlink" title="发起GET&#x2F;POST请求"></a>发起GET&#x2F;POST请求</h3><blockquote>
<p>调用微信小程序提供的wx.request()方法，可以发起GET数据请求，示例代码如下：</p>
</blockquote>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">wx.<span class="title function_">request</span>(&#123;</span><br><span class="line">    <span class="attr">url</span>: <span class="string">&#x27;https://www.xxx.cn/xxx/xxx&#x27;</span>,<span class="comment">//请求的接口地址，必须基于https协议</span></span><br><span class="line">    <span class="attr">method</span>: <span class="string">&#x27;GET&#x27;</span>,<span class="comment">//请求的方式（或使用POST）</span></span><br><span class="line">    <span class="attr">data</span>: &#123;<span class="comment">//发送到服务器的数据</span></span><br><span class="line">        <span class="attr">name</span>: <span class="string">&#x27;xxx&#x27;</span>,</span><br><span class="line">        <span class="attr">age</span>: <span class="string">&#x27;xxx&#x27;</span></span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="attr">success</span>: <span class="function">(<span class="params">res</span>) =&gt;</span> &#123;</span><br><span class="line">        <span class="comment">//请求成功之后的回调函数</span></span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">log</span>(res)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>

<h3 id="在页面刚加载时请求数据"><a href="#在页面刚加载时请求数据" class="headerlink" title="在页面刚加载时请求数据"></a>在页面刚加载时请求数据</h3><blockquote>
<p>将写好的请求数据的方法写在对应页面的js文件中的onLoad: function(options) {}中</p>
</blockquote>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">onLoad</span>: <span class="keyword">function</span> (<span class="params">options</span>) &#123;</span><br><span class="line">    <span class="variable language_">this</span>.<span class="title function_">getData</span>()</span><br><span class="line">    <span class="variable language_">this</span>.<span class="title function_">getxxx</span>()</span><br><span class="line">&#125;,</span><br><span class="line"><span class="title function_">getData</span>(<span class="params"></span>) &#123;</span><br><span class="line">    ...</span><br><span class="line">&#125;,</span><br><span class="line"><span class="title function_">getxxx</span>(<span class="params"></span>) &#123;</span><br><span class="line">    ...</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="跳过request合法域名校验"><a href="#跳过request合法域名校验" class="headerlink" title="跳过request合法域名校验"></a>跳过request合法域名校验</h3><blockquote>
<p>注意：跳过request合法域名校验的选项，仅限在开发与调试阶段使用</p>
</blockquote>
<p><code>步骤：微信开发工具中： 详情—&gt;本地设置—&gt;勾选上不校验合法域名、web-view(业务域名)、TLS版本以及HTTPS证书</code></p>
<p>然后就可以不在域名列表中添加需要发起请求的域名了，而且还可以使用http协议的接口</p>
<h3 id="关于跨域和Ajax的说明"><a href="#关于跨域和Ajax的说明" class="headerlink" title="关于跨域和Ajax的说明"></a>关于跨域和Ajax的说明</h3><blockquote>
<p>跨域问题只存在于基于浏览器的Web开发中。由于小程序的宿主环境不是浏览器，而是微信客户端，所以小程序中不存在跨域的问题。</p>
<p>Ajax技术的核心是依赖于 浏览器中的XMLHttpRequest这个对象，由于小程序的宿主环境是微信客户端，所以小程序中不能叫做”发起Ajax请求”，而是叫做“发起网络数据请求”。</p>
</blockquote>
<h3 id="页面导航"><a href="#页面导航" class="headerlink" title="页面导航"></a>页面导航</h3><h4 id="声明式导航"><a href="#声明式导航" class="headerlink" title="声明式导航"></a>声明式导航</h4><p><strong>导航到tabBar页面：</strong></p>
<p>tabBar页面指的是被配置为tabBar的页面。</p>
<p>在使用<code>&lt;navigator&gt;</code>组件跳转到指定的tabBar页面时，需要指定url属性和open-type属性，其中：</p>
<p>url: 表示要跳转的页面的地址，必须为switchTab</p>
<p>open-type表示跳转的方式，必须为switchTab</p>
<p>示例代码如下：</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">navigator</span> <span class="attr">url</span>=<span class="string">&quot;/pages/message/message&quot;</span> <span class="attr">open-type</span>=<span class="string">&quot;switchTab&quot;</span>&gt;</span>导航到消息页面<span class="tag">&lt;/<span class="name">navigator</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p><strong>导航到非tabBar页面：</strong></p>
<p>非tabBar页面指的是没有被配置为tabBar的页面。</p>
<p>在使用<nabigator>组件跳转到普通的非tabBar页面时，则需要指定url属性和open-type属性，其中：</p>
<p>url: 表示要跳转的页面的地址，必须以<code>/</code>开头</p>
<p>open-type: 表示跳转的方式，必须为navigate</p>
<p>示例代码如下：</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">navigator</span> <span class="attr">url</span>=<span class="string">&quot;/pages/info/info&quot;</span> <span class="attr">open-type</span>=<span class="string">&quot;navigate&quot;</span>&gt;</span>导航到info页面<span class="tag">&lt;/<span class="name">navigator</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p><strong>后退导航：</strong></p>
<p>如果要后退到上一页面或多级页面，则需要指定open-type属性和delta属性，其中：</p>
<p><code>open-type</code>的值必须是<code>navigateBack</code>,表示要进行后退导航</p>
<p><code>delat</code>的值必须是数字，表示要后退的层级</p>
<p>示例代码如下：</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">navigator</span> <span class="attr">open-type</span>=<span class="string">&quot;navigateBack&quot;</span> <span class="attr">delta</span>=<span class="string">&quot;1&quot;</span>&gt;</span>返回上一页<span class="tag">&lt;/<span class="name">navigator</span>&gt;</span></span><br></pre></td></tr></table></figure>

<blockquote>
<p>注意：为了简便，如果只是后退到上一页面，则可以省略delta属性，因为其默认值就是1。</p>
</blockquote>
<h4 id="编程式导航"><a href="#编程式导航" class="headerlink" title="编程式导航"></a>编程式导航</h4><p><strong>导航到tabBar页面：</strong></p>
<p>调用wx.switchTab(Object object)方法，可以跳转到tabBar页面。其中Object参数对象的属性列表如下：</p>
<table>
<thead>
<tr>
<th>属性</th>
<th>类型</th>
<th>是否必选</th>
<th>说明</th>
</tr>
</thead>
<tbody><tr>
<td>url</td>
<td>string</td>
<td>是</td>
<td>需要跳转的tabBar页面的路径，路径后不能带参数</td>
</tr>
<tr>
<td>success</td>
<td>function</td>
<td>否</td>
<td>接口调用成功的回调函数</td>
</tr>
<tr>
<td>fail</td>
<td>function</td>
<td>否</td>
<td>接口调用失败的回调函数</td>
</tr>
<tr>
<td>complete</td>
<td>function</td>
<td>否</td>
<td>接口调用结束的回调函数（调用成功、失败都会执行）</td>
</tr>
</tbody></table>
<p><strong>示例代码如下：</strong></p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">button</span> <span class="attr">bindtap</span>=<span class="string">&quot;gotoMessage&quot;</span>&gt;</span>跳转到消息页面<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br></pre></td></tr></table></figure>

<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="title function_">gotoMessage</span>(<span class="params"></span>) &#123;</span><br><span class="line">    wx.<span class="title function_">switchTab</span>(&#123;</span><br><span class="line">        <span class="attr">url</span>: <span class="string">&#x27;/pages/message/message&#x27;</span></span><br><span class="line">    &#125;)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><strong>导航到非tabBar页面：</strong></p>
<p>调用wx.navigateTo(Object object)方法，可以跳转到tabBar页面。其中Object参数对象的属性列表如下：</p>
<table>
<thead>
<tr>
<th>属性</th>
<th>类型</th>
<th>是否必选</th>
<th>说明</th>
</tr>
</thead>
<tbody><tr>
<td>url</td>
<td>string</td>
<td>是</td>
<td>需要跳转的tabBar页面的路径，路径后不能带参数</td>
</tr>
<tr>
<td>success</td>
<td>function</td>
<td>否</td>
<td>接口调用成功的回调函数</td>
</tr>
<tr>
<td>fail</td>
<td>function</td>
<td>否</td>
<td>接口调用失败的回调函数</td>
</tr>
<tr>
<td>complete</td>
<td>function</td>
<td>否</td>
<td>接口调用结束的回调函数（调用成功、失败都会执行）</td>
</tr>
</tbody></table>
<p><strong>示例代码如下：</strong></p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">button</span> <span class="attr">bindtap</span>=<span class="string">&quot;gotoInfo&quot;</span>&gt;</span>跳转到info页面<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br></pre></td></tr></table></figure>

<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="title function_">gotoInfo</span>(<span class="params"></span>) &#123;</span><br><span class="line">    wx.<span class="title function_">navigateTo</span>(&#123;</span><br><span class="line">        <span class="attr">url</span>: <span class="string">&#x27;/pages/info/info&#x27;</span></span><br><span class="line">    &#125;)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><strong>后退导航：</strong></p>
<p>调用wx.navigateBack(Object object)方法，可以返回上一页面或多级页面。其中Object参数对象的属性列表如下：</p>
<table>
<thead>
<tr>
<th>属性</th>
<th>类型</th>
<th>默认值</th>
<th>是否必选</th>
<th>说明</th>
</tr>
</thead>
<tbody><tr>
<td>delta</td>
<td>number</td>
<td>1</td>
<td>否</td>
<td>返回的页面数，如果delta大于现有页面数，则返回到首页</td>
</tr>
<tr>
<td>success</td>
<td>function</td>
<td></td>
<td>否</td>
<td>接口调用成功的回调函数</td>
</tr>
<tr>
<td>fail</td>
<td>function</td>
<td></td>
<td>否</td>
<td>接口调用失败的回调函数</td>
</tr>
<tr>
<td>complete</td>
<td>function</td>
<td></td>
<td>否</td>
<td>接口调用结束的回调函数（调用成功、失败都会执行）</td>
</tr>
</tbody></table>
<p>示例代码如下：</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">button</span> <span class="attr">bindtap</span>=<span class="string">&quot;gotoBack&quot;</span>&gt;</span>后退<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br></pre></td></tr></table></figure>

<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="title function_">gotoBack</span>(<span class="params"></span>) &#123;</span><br><span class="line">    wx.<span class="title function_">navigateBack</span>(&#123;</span><br><span class="line">        <span class="attr">delta</span>: <span class="number">1</span><span class="comment">//如果只是后退一步则，可以省略</span></span><br><span class="line">    &#125;)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="导航传参"><a href="#导航传参" class="headerlink" title="导航传参"></a>导航传参</h3><h4 id="声明式导航传参"><a href="#声明式导航传参" class="headerlink" title="声明式导航传参"></a>声明式导航传参</h4><p>navigator组件的url属性用来指定将要跳转到的页面的路径。同时，路径的后面还可以携带参数：</p>
<p>1、参数与路径之间 ? 分隔</p>
<p>2、参数键与参数值用 &#x3D; 相连</p>
<p>3、不同参数用 &amp; 分隔</p>
<p>代码示例如下：</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">navigator</span> <span class="attr">url</span>=<span class="string">&quot;/pages/info/info?name=zs&amp;age=20&quot;</span>&gt;</span>跳转到info页面<span class="tag">&lt;/<span class="name">navigator</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h4 id="编程式导航传参"><a href="#编程式导航传参" class="headerlink" title="编程式导航传参"></a>编程式导航传参</h4><p>调用wx.navigateTo(Object object)方法跳转页面时，也可以携带参数，代码示例如下：</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">button</span> <span class="attr">bindtap</span>=<span class="string">&quot;gotoInfo2&quot;</span>&gt;</span>跳转到info页面<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br></pre></td></tr></table></figure>

<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="title function_">gotoInfo2</span>(<span class="params"></span>) &#123;</span><br><span class="line">    wx.<span class="title function_">navigateTo</span>(&#123;</span><br><span class="line">        <span class="attr">url</span>: <span class="string">&#x27;/pages/info/info?name=ls&amp;gender=男&#x27;</span></span><br><span class="line">    &#125;)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="在onLoad中接收导航参数"><a href="#在onLoad中接收导航参数" class="headerlink" title="在onLoad中接收导航参数"></a>在onLoad中接收导航参数</h4><p>通过声明式导航传参或编程式导航传参所携带的参数，可以直接在onLoad事件中直接获取到，示例代码如下：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">onLoad</span>: <span class="keyword">function</span>(<span class="params">options</span>) &#123;</span><br><span class="line">    <span class="comment">//options就是导航传递过来的参数对象</span></span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(options)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="下拉刷新"><a href="#下拉刷新" class="headerlink" title="下拉刷新"></a>下拉刷新</h3><h4 id="启用下拉刷新的两种方式："><a href="#启用下拉刷新的两种方式：" class="headerlink" title="启用下拉刷新的两种方式："></a>启用下拉刷新的两种方式：</h4><p><strong>1、全局开启下拉刷新</strong></p>
<blockquote>
<p>在app.json的window结点中，将enablePullDownRefresh设置为true</p>
</blockquote>
<p><strong>2、局部开启下拉刷新</strong></p>
<blockquote>
<p>在页面的.json配置文件中，将enablePullDownRefresh设置为true</p>
</blockquote>
<blockquote>
<p>在实际开发中，推荐是以哦那个第2中方式，为需要的也买你单独开启下拉刷新的效果。</p>
</blockquote>
<h4 id="配置下拉刷新窗口的样式"><a href="#配置下拉刷新窗口的样式" class="headerlink" title="配置下拉刷新窗口的样式"></a>配置下拉刷新窗口的样式</h4><p>在全局或页面的.json配置文件中，通过backgroundColor和backgroundTextStyle来配置下拉刷新窗口的样式，其中：</p>
<p><strong>backgroundColor用来配置下拉刷新窗口的背景颜色，仅支持16进制的颜色值</strong></p>
<p><strong>backgroundTextStyle用来配置下拉刷新loading（3个小圆点）的样式，仅支持dark和light</strong></p>
<figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="punctuation">&#123;</span></span><br><span class="line">    <span class="attr">&quot;usingComponents&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span><span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;enablePullDownRefresh&quot;</span><span class="punctuation">:</span> <span class="literal"><span class="keyword">true</span></span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;backgroundColor&quot;</span><span class="punctuation">:</span> <span class="string">&quot;#efefef&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;backgroundTextStyle&quot;</span><span class="punctuation">:</span> <span class="string">&quot;dark&quot;</span></span><br><span class="line"><span class="punctuation">&#125;</span></span><br></pre></td></tr></table></figure>

<h4 id="监听页面的下拉刷新事件"><a href="#监听页面的下拉刷新事件" class="headerlink" title="监听页面的下拉刷新事件"></a>监听页面的下拉刷新事件</h4><p>在页面的.js文件中，通过onPullDownRefresh()函数即可监听当前页面的下拉刷新事件。</p>
<p>例如，在页面的wxml中有如下的UI结构，点击按钮可以让count值自增+1，当下拉刷新的时候，count值重置为0</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">view</span>&gt;</span>count值为：&#123;&#123;count&#125;&#125;<span class="tag">&lt;/<span class="name">view</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">button</span> <span class="attr">bindtap</span>=<span class="string">&quot;countAdd&quot;</span>&gt;</span>+1<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br></pre></td></tr></table></figure>

<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="title function_">countAdd</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="variable language_">this</span>.<span class="title function_">setData</span>(&#123;</span><br><span class="line">        <span class="attr">count</span>: <span class="variable language_">this</span>.<span class="property">data</span>.<span class="property">count</span> + <span class="number">1</span></span><br><span class="line">    &#125;)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//监听用户下拉动作</span></span><br><span class="line"><span class="attr">onPullDownRefresh</span>: <span class="keyword">function</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="variable language_">this</span>.<span class="title function_">setData</span>(&#123;</span><br><span class="line">        <span class="attr">count</span>: <span class="number">0</span></span><br><span class="line">    &#125;)</span><br><span class="line">    <span class="comment">//当数据重置成功之后，调用此函数，关闭下拉刷新的效果</span></span><br><span class="line">    wx.<span class="title function_">stopPullDownRefresh</span>()</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="监听页面的上拉触底事件"><a href="#监听页面的上拉触底事件" class="headerlink" title="监听页面的上拉触底事件"></a>监听页面的上拉触底事件</h3><p>在页面的.js文件中，通过onReachBottom()函数即可监听当前页面的上拉触底事件。示例如下：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">onReachBottom</span>: <span class="keyword">function</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;触发了上拉触底的事件&#x27;</span>)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<blockquote>
<p>注意：在上拉触底事件中发请求的时候，我们需要注意<code>节流</code>处理，防止在上一个请求没有处理完时，又发出下一个请求。</p>
</blockquote>
<h4 id="配置上拉处理距离"><a href="#配置上拉处理距离" class="headerlink" title="配置上拉处理距离"></a>配置上拉处理距离</h4><blockquote>
<p>在对应页面的.json文件中做相应的配置</p>
<blockquote>
<p>上拉距离默认是50</p>
</blockquote>
</blockquote>
<figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="punctuation">&#123;</span></span><br><span class="line">    <span class="attr">&quot;usingComponents&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span><span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;onReachBottomDistance&quot;</span><span class="punctuation">:</span> <span class="number">150</span></span><br><span class="line"><span class="punctuation">&#125;</span></span><br></pre></td></tr></table></figure>

<h3 id="小程序的生命周期函数"><a href="#小程序的生命周期函数" class="headerlink" title="小程序的生命周期函数"></a>小程序的生命周期函数</h3><h4 id="应用的生命周期函数"><a href="#应用的生命周期函数" class="headerlink" title="应用的生命周期函数"></a>应用的生命周期函数</h4><blockquote>
<p>小程序的应用生命周期函数需要在app.js中进行声明，示例代码如下：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//app.js文件</span></span><br><span class="line"><span class="title class_">App</span>(&#123;</span><br><span class="line">    <span class="comment">//小程序初始化完成时，执行此函数，全局只触发一次。可以做一些初始化的工作。</span></span><br><span class="line">    <span class="attr">onLaunch</span>: <span class="keyword">function</span>(<span class="params">options</span>) &#123; &#125;,</span><br><span class="line">    <span class="comment">//小程序启动，或从后台进入前台显示时触发。</span></span><br><span class="line">    <span class="attr">onShow</span>: <span class="keyword">function</span>(<span class="params">options</span>) &#123; &#125;,</span><br><span class="line">    <span class="comment">//小程序从前台进入后台时触发。</span></span><br><span class="line">    <span class="attr">onHide</span>: <span class="keyword">function</span>(<span class="params"></span>) &#123; &#125;</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>
</blockquote>
<h4 id="页面的生命周期函数"><a href="#页面的生命周期函数" class="headerlink" title="页面的生命周期函数"></a>页面的生命周期函数</h4><blockquote>
<p>小程序的页面生命周期函数需要在页面的.js文件中进行声明，示例代码如下：</p>
</blockquote>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//页面的.js文件</span></span><br><span class="line"><span class="title class_">Page</span>(&#123;</span><br><span class="line">    <span class="attr">onLoad</span>: <span class="keyword">function</span>(<span class="params">options</span>) &#123;&#125;,<span class="comment">//监听页面加载，一个页面只调用1次（常用）</span></span><br><span class="line">    <span class="attr">onShow</span>: <span class="keyword">function</span>(<span class="params"></span>) &#123;&#125;,<span class="comment">//监听页面显示</span></span><br><span class="line">    <span class="attr">onReady</span>: <span class="keyword">function</span>(<span class="params"></span>) &#123;&#125;,<span class="comment">//监听页面初次渲染完成，一个页面只调用1次（常用）</span></span><br><span class="line">    <span class="attr">onHide</span>: <span class="keyword">function</span>(<span class="params"></span>) &#123;&#125;,<span class="comment">//监听页面隐藏</span></span><br><span class="line">    <span class="attr">onUnload</span>: <span class="keyword">function</span>(<span class="params"></span>) &#123;&#125;<span class="comment">//监听页面卸载，一个页面只调用1次</span></span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>

<h3 id="WXS脚本"><a href="#WXS脚本" class="headerlink" title="WXS脚本"></a>WXS脚本</h3><blockquote>
<p>wxs的应用场景：wxml中无法调用在页面的.js中定义的函数，但是，wxml中可以调用wxs中定义的函数。因此，小程序中wxs的典型应用场景就是“过滤器”。</p>
</blockquote>
<blockquote>
<p>wxs又自己的数据类型</p>
<blockquote>
<p>number数值类型、string字符串类型、boolean布尔类型、object对象类型、function函数类型、array数组类型、date日期类型、regexp正则</p>
</blockquote>
<p>wxs不支持类似于ES6即以上的语法形式</p>
<blockquote>
<p>不支持: let、const、解构赋值、展开运算符、箭头函数、对象属性简写、etc…</p>
<p>支持：var定义变量、普通function函数等类似于ES5的语法</p>
</blockquote>
<p>wxs遵循CommonJS规范</p>
<blockquote>
<p>module对象</p>
<p>require()函数</p>
<p>module.exports对象</p>
</blockquote>
</blockquote>
<h4 id="内嵌wxs脚本"><a href="#内嵌wxs脚本" class="headerlink" title="内嵌wxs脚本"></a>内嵌wxs脚本</h4><blockquote>
<p>wxs代码可以编写在wxml文件中的<code>&lt;wxs&gt;</code>标签内，就像javascript代码可以编写在html文件中的<code>&lt;script&gt;</code>标签内一样。</p>
<p>wxml文件中的每个<code>&lt;wxs&gt;&lt;/wxs&gt;</code>标签，必须提供module属性，用来指定当前wxs的模快名称，方便在wxml中访问模块中的成员：</p>
</blockquote>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">view</span>&gt;</span>&#123;&#123;m1.toUpper(username)&#125;&#125;<span class="tag">&lt;/<span class="name">view</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">wxs</span> <span class="attr">module</span>=<span class="string">&quot;m1&quot;</span>&gt;</span></span><br><span class="line">    //将文本转为大写形式 ls -&gt; LS</span><br><span class="line">    module.exports.toUpper = function(str) &#123;</span><br><span class="line">    	return str.toUpperCase()</span><br><span class="line">    &#125;</span><br><span class="line"><span class="tag">&lt;/<span class="name">wxs</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h4 id="定义外联的wxs脚本"><a href="#定义外联的wxs脚本" class="headerlink" title="定义外联的wxs脚本"></a>定义外联的wxs脚本</h4><blockquote>
<p>可以在utils文件夹下创建一个<code>tools.wxs</code></p>
</blockquote>
<blockquote>
<p>wxs代码还可以编写在以.wxs为后缀名的文件内，就像javascript代码可以编写在以.js为后缀名的文件中一样。示例代码如下：</p>
</blockquote>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">toLower</span>(<span class="params">str</span>) &#123;</span><br><span class="line">    <span class="keyword">return</span> str.<span class="title function_">toLowerCase</span>()</span><br><span class="line">&#125;</span><br><span class="line"><span class="variable language_">module</span>.<span class="property">exports</span> = &#123;</span><br><span class="line">    <span class="attr">toLower</span>: toLower</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="使用外联的wxs脚本"><a href="#使用外联的wxs脚本" class="headerlink" title="使用外联的wxs脚本"></a>使用外联的wxs脚本</h4><blockquote>
<p>在wxml中引入外联的wxs脚本时，必须为<code>&lt;wxs&gt;</code>标签添加module和src属性，其中：</p>
</blockquote>
<blockquote>
<p>module用来指定模块的名称</p>
<p>src用来指定要引入的脚本的路径，且必须是相对路径</p>
</blockquote>
<p>示例代码如下：</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!-- 调用m2模块中的方法 --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">view</span>&gt;</span>&#123;&#123;m2.toLower(xxx)&#125;&#125;<span class="tag">&lt;/<span class="name">view</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!-- 引用外联的tools.wxs脚本，并命名为m2 --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">wxs</span> <span class="attr">src</span>=<span class="string">&quot;../../utils/tools.wxs&quot;</span> <span class="attr">module</span>=<span class="string">&quot;m2&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">wxs</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h4 id="wxs的特点"><a href="#wxs的特点" class="headerlink" title="wxs的特点"></a>wxs的特点</h4><p><strong>不能作为组件的事件回调：</strong></p>
<blockquote>
<p>wxs典型的应用场景就是“过滤器”，经常配合Mustache语法进行使用，例如：</p>
</blockquote>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">view</span>&gt;</span>&#123;&#123;m2.toLower(country)&#125;&#125;<span class="tag">&lt;/<span class="name">view</span>&gt;</span></span><br></pre></td></tr></table></figure>

<blockquote>
<p>但是，在wxs中定义的函数不能作为组件的事件回调函数。例如，下面的用法是<code>错误的</code></p>
</blockquote>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">button</span> <span class="attr">bindtap</span>=<span class="string">&quot;m2.toLower&quot;</span>&gt;</span>按钮<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p><strong>隔离性：</strong></p>
<blockquote>
<p>隔离性指的是wxs的运行环境和其他JavaScript代码是隔离的。体现在如下两方面：</p>
<blockquote>
<p>wxs不能调用js中定义的函数</p>
<p>wxs不能调用小程序提供的API</p>
</blockquote>
</blockquote>
<p><strong>性能好：</strong></p>
<blockquote>
<p>在IOS设备上，小程序内的WXS会比JavaScript代码快2~20倍</p>
<p>在android设备上，二者的运行效率无差异</p>
</blockquote>
<h3 id="自定义组件"><a href="#自定义组件" class="headerlink" title="自定义组件"></a>自定义组件</h3><h4 id="创建组件"><a href="#创建组件" class="headerlink" title="创建组件"></a>创建组件</h4><blockquote>
<p>1、在项目的根目录中，鼠标右键，创建components-&gt;test文件夹 （其中test为组件名）</p>
<p>2、在新建的components-&gt;test文件夹上，鼠标右键，点击“新建Component”</p>
<p>3、键入组件的名称之后回车，会自动生成组件对应的4个文件，后缀名分别为.js, .json , .wxml 和 .wxss</p>
<blockquote>
<p>注意：为了保证目录结构的清晰，建议把不同的组件，存放到单独目录中</p>
</blockquote>
</blockquote>
<h4 id="引用组件"><a href="#引用组件" class="headerlink" title="引用组件"></a>引用组件</h4><blockquote>
<p>组件的引用方式分为“局部引用”和“全局引用”</p>
<blockquote>
<p>局部引用：组件只能在当前被引用的页面内使用</p>
<p>全局引用：组件可以在每个小程序页面中使用</p>
</blockquote>
</blockquote>
<h5 id="局部引用组件"><a href="#局部引用组件" class="headerlink" title="局部引用组件"></a>局部引用组件</h5><blockquote>
<p>在<code>页面的</code>.json配置文件中引用组件的方式，叫做“局部引用”。示例代码如下：</p>
<figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//在页面的.json文件中，引入组件</span></span><br><span class="line"><span class="punctuation">&#123;</span></span><br><span class="line">    <span class="attr">&quot;usingComponents&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">        <span class="attr">&quot;my-test&quot;</span><span class="punctuation">:</span> <span class="string">&quot;/components/test/test&quot;</span></span><br><span class="line">    <span class="punctuation">&#125;</span></span><br><span class="line"><span class="punctuation">&#125;</span></span><br></pre></td></tr></table></figure>

<p>在页面的.wxml文件中，使用组件</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">my-test1</span>&gt;</span><span class="tag">&lt;/<span class="name">my-test1</span>&gt;</span></span><br></pre></td></tr></table></figure>
</blockquote>
<h5 id="全局引用组件"><a href="#全局引用组件" class="headerlink" title="全局引用组件"></a>全局引用组件</h5><blockquote>
<p>在app.json全局配置文件中引用组件的方式，叫做“全局引用”。示例代码如下：</p>
<figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//在app.json文件中，引入组件</span></span><br><span class="line"><span class="punctuation">&#123;</span></span><br><span class="line">    <span class="string">&quot;usingComponents:&quot;</span> <span class="punctuation">&#123;</span></span><br><span class="line">    	<span class="attr">&quot;my-test&quot;</span><span class="punctuation">:</span> <span class="string">&quot;/components/test/test&quot;</span></span><br><span class="line">	<span class="punctuation">&#125;</span></span><br><span class="line"><span class="punctuation">&#125;</span></span><br></pre></td></tr></table></figure>

<p>在任意一个页面中的.wxml文件中，使用该组件</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">my-test</span>&gt;</span><span class="tag">&lt;/<span class="name">my-test</span>&gt;</span></span><br></pre></td></tr></table></figure>
</blockquote>
<h4 id="组件和页面的区别"><a href="#组件和页面的区别" class="headerlink" title="组件和页面的区别"></a>组件和页面的区别</h4><blockquote>
<p>从表面来看，组件和页面都是由.js、.json、.wxml和.wxss这四个文件组成的。但是，组件和页面的.js与.json文件有明显的不同：</p>
<blockquote>
<p>组件的.json文件中需要声明“component”: true属性</p>
<p>组件的.js文件中调用的是Component()函数</p>
<p>组件的事件处理函数需要定义到methods节点中</p>
</blockquote>
</blockquote>
<h3 id="自定义组件样式"><a href="#自定义组件样式" class="headerlink" title="自定义组件样式"></a>自定义组件样式</h3><h4 id="组件样式隔离"><a href="#组件样式隔离" class="headerlink" title="组件样式隔离"></a>组件样式隔离</h4><blockquote>
<p>默认情况下，自定义组件的样式只对当前组件生效，不会影响到组件之外的UI结构。</p>
<p>好处：1、防止外界的样式影响组件内部的样式  2、防止组件的样式破坏外界的样式</p>
</blockquote>
<h4 id="组件样式隔离的注意点"><a href="#组件样式隔离的注意点" class="headerlink" title="组件样式隔离的注意点"></a>组件样式隔离的注意点</h4><blockquote>
<p>app.wxss中的全局样式对对组件无效</p>
<p>只有class选择器会有样式隔离效果，id选择器、属性选择器、标签选择器不受样式隔离的影响</p>
<blockquote>
<p>建议：在组件的引用组件的页面中建议使用class选择器，不要使用id、属性、标签选择器！</p>
</blockquote>
</blockquote>
<h4 id="修改组件的样式隔离选项"><a href="#修改组件的样式隔离选项" class="headerlink" title="修改组件的样式隔离选项"></a>修改组件的样式隔离选项</h4><blockquote>
<p>默认情况下,自定义组件的样式隔离特性能够防止组件内外样式互相干扰的问题。但有时，我们希望在外界能够控制组件内部的样式，此时，可以通过styleIsolation修改组件的样式隔离选项，用法如下：</p>
</blockquote>
<p><strong>styleIsolation的可选值：</strong></p>
<table>
<thead>
<tr>
<th>可选值</th>
<th>默认值</th>
<th>描述</th>
</tr>
</thead>
<tbody><tr>
<td>isolated</td>
<td>是</td>
<td>表示启用样式隔离，在自定义组件内外，使用class指定的样式将不会互相影响</td>
</tr>
<tr>
<td>apply-shared</td>
<td>否</td>
<td>表示页面wxss样式将影响到自定义组件，但自定义组件wxss中指定的样式不会影响页面</td>
</tr>
<tr>
<td>shared</td>
<td>否</td>
<td>表示页面wxss样式将影响到自定义组件，自定义组件wxss中指定的样式也会影响页面和其他设置了apply-shared或shared的自定义组件</td>
</tr>
</tbody></table>
<blockquote>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//在组件的.js文件中新增如下配置</span></span><br><span class="line"><span class="title class_">Component</span>(&#123;</span><br><span class="line">    <span class="attr">options</span>: &#123;</span><br><span class="line">        <span class="attr">styleIsolation</span>: <span class="string">&#x27;isolated&#x27;</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>

<figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//或在组件的.json文件中新增如下配置</span></span><br><span class="line"><span class="punctuation">&#123;</span></span><br><span class="line">    <span class="attr">&quot;styleIsolation&quot;</span><span class="punctuation">:</span> &#x27;isolated&#x27;</span><br><span class="line"><span class="punctuation">&#125;</span></span><br></pre></td></tr></table></figure>
</blockquote>
<h3 id="自定义组件中的methods方法"><a href="#自定义组件中的methods方法" class="headerlink" title="自定义组件中的methods方法"></a>自定义组件中的methods方法</h3><blockquote>
<p>在小程序组件中，事件处理函数 和自定义方法需要定义到methods结点中，示例代码如下：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="title class_">Components</span>(&#123;</span><br><span class="line">    <span class="attr">methods</span>: &#123; <span class="comment">//组件的方法列表[包含事件处理函数和自定义方法]</span></span><br><span class="line">        <span class="title function_">addCount</span>(<span class="params"></span>) &#123;<span class="comment">// 事件处理函数</span></span><br><span class="line">            <span class="variable language_">this</span>.<span class="title function_">setData</span>(&#123;<span class="attr">count</span>: <span class="variable language_">this</span>.<span class="property">data</span>.<span class="property">count</span> + <span class="number">1</span>&#125;)</span><br><span class="line">            <span class="variable language_">this</span>.<span class="title function_">_showCount</span>() <span class="comment">//通过this直接调用自定义方法</span></span><br><span class="line">        &#125;，</span><br><span class="line">        <span class="title function_">_showCount</span>(<span class="params"></span>) &#123;<span class="comment">//自定义方法建议以 _ 开头</span></span><br><span class="line">    		wx.<span class="title function_">showToast</span>(&#123;</span><br><span class="line">    			<span class="attr">title</span>: <span class="string">&#x27;count值为：&#x27;</span> + <span class="variable language_">this</span>.<span class="property">data</span>.<span class="property">count</span>,</span><br><span class="line">    			<span class="attr">icon</span>: <span class="string">&#x27;none&#x27;</span></span><br><span class="line">			&#125;)</span><br><span class="line">		&#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>
</blockquote>
<h3 id="自定义组件的properties属性"><a href="#自定义组件的properties属性" class="headerlink" title="自定义组件的properties属性"></a>自定义组件的properties属性</h3><blockquote>
<p>在小程序组件中，properties是组件的对外属性，用来接收外界传递到组件中的数据，示例代码如下：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="title class_">Component</span>(&#123;</span><br><span class="line">    <span class="comment">//属性定义</span></span><br><span class="line">    <span class="attr">properties</span>: &#123;</span><br><span class="line">        <span class="attr">max</span>: &#123;<span class="comment">//完整定义属性的方式【当需要指定属性默认值时，建议使用此方式】</span></span><br><span class="line">            <span class="attr">type</span>: <span class="title class_">Number</span>,<span class="comment">//属性值的数据类型</span></span><br><span class="line">            <span class="attr">value</span>: <span class="number">10</span><span class="comment">//属性默认值</span></span><br><span class="line">        &#125;,</span><br><span class="line">        <span class="attr">max</span>: <span class="title class_">Number</span><span class="comment">//简化定义属性的方式【不需指定属性默认值，可以使用简化方式】</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>

<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">my-test1</span> <span class="attr">max</span>=<span class="string">&quot;10&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">my-test1</span>&gt;</span></span><br></pre></td></tr></table></figure>
</blockquote>
<h4 id="data和properties的区别"><a href="#data和properties的区别" class="headerlink" title="data和properties的区别"></a>data和properties的区别</h4><blockquote>
<p>在小程序的组件中，properties属性和data数据的用法相同，它们都是可读可写的，只不过：</p>
<blockquote>
<p>data更倾向于存储组件的私有数据</p>
<p>properties更倾向于存储外界传递到组件中的数据</p>
</blockquote>
</blockquote>
<blockquote>
<p>由于data数据和properties属性在本质上没有任何区别，因此properties属性的值也可以用于页面渲染，也可以使用setData为properties中的属性重新赋值，示例代码如下：</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">//在组件的.wxml文件中使用properties属性的值</span><br><span class="line"><span class="tag">&lt;<span class="name">view</span>&gt;</span>max属性的值为：&#123;&#123;max&#125;&#125;<span class="tag">&lt;/<span class="name">view</span>&gt;</span></span><br></pre></td></tr></table></figure>

<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="title class_">Component</span>(&#123;</span><br><span class="line">    <span class="attr">properties</span>: &#123;<span class="attr">max</span>: <span class="title class_">Number</span>&#125;,<span class="comment">//定义属性</span></span><br><span class="line">    <span class="attr">methods</span>: &#123;</span><br><span class="line">        <span class="title function_">addCount</span>(<span class="params"></span>) &#123;</span><br><span class="line">            <span class="variable language_">this</span>.<span class="title function_">setData</span>(&#123;</span><br><span class="line">                <span class="attr">max</span>: <span class="variable language_">this</span>.<span class="property">properties</span>.<span class="property">max</span> + <span class="number">1</span></span><br><span class="line">            &#125;)<span class="comment">//使用setData修改属性的值</span></span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>
</blockquote>
<h3 id="自定义组件的事件监听器"><a href="#自定义组件的事件监听器" class="headerlink" title="自定义组件的事件监听器"></a>自定义组件的事件监听器</h3><blockquote>
<p>数据监听器用于监听和响应任何属性和数据字段的变化，从而执行特定的操作。它的作用类似于vue中的watch侦听器。在小程序组件中，数据监听器的基本语法格式如下：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="title class_">Component</span>(&#123;</span><br><span class="line">    <span class="attr">observers</span>: &#123;</span><br><span class="line">        <span class="string">&#x27;字段A, 字段B&#x27;</span>: <span class="keyword">function</span>(<span class="params">字段A的新值, 字段B的新值</span>) &#123;</span><br><span class="line">            <span class="comment">//do something</span></span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>
</blockquote>
<h3 id="数据监听器的基本用法"><a href="#数据监听器的基本用法" class="headerlink" title="数据监听器的基本用法"></a>数据监听器的基本用法</h3><p><strong>组件的UI结构如下：</strong></p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">// 组件的UI结构如下</span><br><span class="line"><span class="tag">&lt;<span class="name">view</span>&gt;</span>&#123;&#123;n1&#125;&#125; + &#123;&#123;n2&#125;&#125; = &#123;&#123;sum&#125;&#125;<span class="tag">&lt;/<span class="name">view</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">button</span> <span class="attr">size</span>=<span class="string">&quot;mini&quot;</span> <span class="attr">bindtap</span>=<span class="string">&quot;addN1&quot;</span>&gt;</span>n1自增<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">button</span> <span class="attr">size</span>=<span class="string">&quot;mini&quot;</span> <span class="attr">bindtap</span>=<span class="string">&quot;addN2&quot;</span>&gt;</span>n2自增<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p><strong>组件的.js文件代码如下：</strong></p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="title class_">Component</span>(&#123;</span><br><span class="line">    <span class="attr">data</span>: &#123; <span class="attr">n1</span>: <span class="number">0</span>, <span class="attr">n2</span>: <span class="number">0</span>, <span class="attr">sum</span>: <span class="number">0</span>&#125;,<span class="comment">//数据结点</span></span><br><span class="line">    <span class="attr">methods</span>: &#123; <span class="comment">//方法列表</span></span><br><span class="line">        <span class="title function_">addN1</span>(<span class="params"></span>) &#123;<span class="variable language_">this</span>.<span class="title function_">setData</span>(&#123;<span class="attr">n1</span>: <span class="variable language_">this</span>.<span class="property">data</span>.<span class="property">n1</span> + <span class="number">1</span>&#125;)&#125;,</span><br><span class="line">        <span class="title function_">addN2</span>(<span class="params"></span>) &#123;<span class="variable language_">this</span>.<span class="title function_">setData</span>(&#123;<span class="attr">n2</span>: <span class="variable language_">this</span>.<span class="property">data</span>.<span class="property">n2</span> + <span class="number">1</span>&#125;)&#125;</span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="attr">observers</span>: &#123; <span class="comment">// 数据监听结点</span></span><br><span class="line">        <span class="string">&#x27;n1, n2&#x27;</span>: <span class="keyword">function</span>(<span class="params">n1, n2</span>) &#123; <span class="comment">// 监听n1 和 n2数据的变化</span></span><br><span class="line">            <span class="variable language_">this</span>.<span class="title function_">setData</span>(&#123; <span class="attr">sum</span>: n1 + n2 &#125;) <span class="comment">//通过监听器，自动计算sum的值</span></span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>

<h3 id="监听对象属性的变化"><a href="#监听对象属性的变化" class="headerlink" title="监听对象属性的变化"></a>监听对象属性的变化</h3><blockquote>
<p>数据监听器支持监听对象中单个或多个属性的变化，示例代码如下：</p>
</blockquote>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="title class_">Component</span>(&#123;</span><br><span class="line">    <span class="attr">observers</span>: &#123;</span><br><span class="line">        <span class="string">&#x27;对象.属性A，对象.属性B&#x27;</span>: <span class="keyword">function</span>(<span class="params">属性A的新值，属性B的新值</span>) &#123;</span><br><span class="line">            <span class="comment">//触发此监听器的3种情况：</span></span><br><span class="line">            <span class="comment">//【为属性A赋值】使用setData设置this.data.对象.属性A时触发</span></span><br><span class="line">            <span class="comment">//【为属性B赋值】使用setData设置this.data.对象.属性B时触发</span></span><br><span class="line">            <span class="comment">//【直接为对象赋值】使用setData设置this.data.对象时触发</span></span><br><span class="line">            <span class="comment">//do something...</span></span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>

<h3 id="纯数据字段"><a href="#纯数据字段" class="headerlink" title="纯数据字段"></a>纯数据字段</h3><blockquote>
<p>纯数据字段指的是哪些不用于界面渲染的data字段</p>
</blockquote>
<blockquote>
<p>应用场景：例如有些情况下，某些data种的字段既不会展示到界面上，也不会传递给其他组件，仅仅在当前组件内部使用。带有这种特性的data字段适合被设置为纯数据字段</p>
</blockquote>
<blockquote>
<p><strong>好处：纯数据字段有助于提升页面更新的性能。</strong></p>
</blockquote>
<h4 id="使用规则"><a href="#使用规则" class="headerlink" title="使用规则"></a>使用规则</h4><p>在Component构造器的options结点中，指定pureDataPattern为一个正则表达式，字段名符合这个正则表达式的字段将成为纯数据字段，示例代码如下：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="title class_">Component</span>(&#123;</span><br><span class="line">    <span class="attr">options</span>: &#123;</span><br><span class="line">        <span class="comment">//指定所有 _ 开头的数据字段为纯数据字段</span></span><br><span class="line">        <span class="attr">pureDataPattern</span>: <span class="regexp">/^_/</span></span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="attr">data</span>: &#123;</span><br><span class="line">        <span class="attr">a</span>: <span class="literal">true</span>, <span class="comment">//普通数据字段</span></span><br><span class="line">        <span class="attr">_b</span>: <span class="literal">true</span> <span class="comment">//纯数据字段</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>

<h3 id="自定义组件的声明周期函数"><a href="#自定义组件的声明周期函数" class="headerlink" title="自定义组件的声明周期函数"></a>自定义组件的声明周期函数</h3><table>
<thead>
<tr>
<th>生命周期函数</th>
<th>参数</th>
<th>描述说明</th>
</tr>
</thead>
<tbody><tr>
<td><strong>created</strong></td>
<td><strong>无</strong></td>
<td><strong>在组件实例刚刚被创建时执行</strong></td>
</tr>
<tr>
<td><strong>attached</strong></td>
<td><strong>无</strong></td>
<td><strong>在组件实例进入页面结点树时执行</strong></td>
</tr>
<tr>
<td>ready</td>
<td>无</td>
<td>在组件在视图层布局完成后执行</td>
</tr>
<tr>
<td>moved</td>
<td>无</td>
<td>在组件实例被移动到结点树另一个位置时执行</td>
</tr>
<tr>
<td><strong>detached</strong></td>
<td><strong>无</strong></td>
<td><strong>在组件实例被从页面结点树移除时执行</strong></td>
</tr>
<tr>
<td>error</td>
<td>Object Error</td>
<td>每当组件方法抛出错误时执行</td>
</tr>
</tbody></table>
<h4 id="自定义组件主要的生命周期函数"><a href="#自定义组件主要的生命周期函数" class="headerlink" title="自定义组件主要的生命周期函数"></a>自定义组件主要的生命周期函数</h4><blockquote>
<p>在小程序组件中，最重要的生命周期函数有3个，分别是created、attached、detached。它们各自的特点如下：</p>
<blockquote>
<p>组件实例<strong>刚被创建好</strong>的时候，created生命周期函数会被触发</p>
<blockquote>
<p>此时还不能调用setData</p>
<p>通常在这个生命周期函数中，只应该用于给组件的this添加一些自定义的属性字段</p>
</blockquote>
</blockquote>
<blockquote>
<p>在组件<strong>完全初始化完毕、进入页面结点树后</strong>，attached生命周期函数会被触发</p>
<blockquote>
<p>此时，this.data已被初始化完毕</p>
<p>这个生命周期很有用，绝大多数初始化的工作可以在这个时机进行（例如发请求获取初始数据）</p>
</blockquote>
</blockquote>
<blockquote>
<p>在组件<strong>离开页面结点树后</strong>，detached生命周期函数会被触发</p>
<blockquote>
<p>退出一个页面时，会触发页面内每个自定义组件的detached生命周期函数</p>
<p>此时适合做一些清理性质的工作</p>
</blockquote>
</blockquote>
</blockquote>
<h4 id="自定义组件生命周期函数的使用"><a href="#自定义组件生命周期函数的使用" class="headerlink" title="自定义组件生命周期函数的使用"></a>自定义组件生命周期函数的使用</h4><blockquote>
<p>在小程序组件中，生命周期函数可以直接定义在Component构造器的第一级参数中，可以在<code>lifetimes</code>字段内进行声明(这是推荐的方式，其优先级最高)。示例代码如下：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="title class_">Component</span>(&#123;</span><br><span class="line">    <span class="comment">//推荐用法</span></span><br><span class="line">    <span class="attr">lifetimes</span>: &#123;</span><br><span class="line">        <span class="title function_">attached</span>(<span class="params"></span>) &#123; &#125;, <span class="comment">//在组件实例进入页面结点树时执行</span></span><br><span class="line">        <span class="title function_">detached</span>(<span class="params"></span>) &#123; &#125;, <span class="comment">//在组件实例被从页面结点树移除时执行</span></span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="comment">//以下是旧式的定义方式</span></span><br><span class="line">    <span class="title function_">attached</span>(<span class="params"></span>) &#123; &#125;, <span class="comment">// 在组件实例进入页面结点树时执行</span></span><br><span class="line">    <span class="title function_">detached</span>(<span class="params"></span>) &#123; &#125; <span class="comment">//在组件实例被从页面结点树移除时执行</span></span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>
</blockquote>
<h3 id="组件所在页面的生命周期"><a href="#组件所在页面的生命周期" class="headerlink" title="组件所在页面的生命周期"></a>组件所在页面的生命周期</h3><blockquote>
<p>有时，自定义组件的行为依赖于页面状态的变化，此时就需要用到组件所在页面的生命周期。</p>
<p>例如：每当触发页面的show生命周期函数的时候，我们希望能够重新生成一个随机的RGB颜色值。</p>
<p>在自定义组件中，组件所在页面的生命周期函数 有如下3个，分别是：</p>
<table>
<thead>
<tr>
<th>生命周期函数</th>
<th>参数</th>
<th>描述</th>
</tr>
</thead>
<tbody><tr>
<td>show</td>
<td>无</td>
<td>组件所在的页面被展示时执行</td>
</tr>
<tr>
<td>hide</td>
<td>无</td>
<td>组件所在的页面被隐藏时执行</td>
</tr>
<tr>
<td>resize</td>
<td>Object Size</td>
<td>组件所有的页面尺寸变化时执行</td>
</tr>
</tbody></table>
</blockquote>
<h4 id="pageLifetimes结点"><a href="#pageLifetimes结点" class="headerlink" title="pageLifetimes结点"></a>pageLifetimes结点</h4><blockquote>
<p>组件所在页面的生命周期函数，需要定义在pageLifetimes结点中，示例代码如下：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="title class_">Component</span>(&#123;</span><br><span class="line">    <span class="attr">pageLifetimes</span>: &#123;</span><br><span class="line">        <span class="attr">show</span>: <span class="keyword">function</span>(<span class="params"></span>) &#123; &#125;, <span class="comment">// 页面被展示</span></span><br><span class="line">        <span class="attr">hide</span>: <span class="keyword">function</span>(<span class="params"></span>) &#123; &#125;, <span class="comment">//页面被隐藏</span></span><br><span class="line">        <span class="attr">resize</span>: <span class="keyword">function</span>(<span class="params">size</span>) &#123; &#125; <span class="comment">//页面尺寸变化</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>
</blockquote>
<h3 id="插槽"><a href="#插槽" class="headerlink" title="插槽"></a>插槽</h3><blockquote>
<p>在自定义组件的wxml结构中，可以提供应给<code>&lt;slot&gt;</code>结点（插槽），用于承载组件使用者提供的wxml结构。</p>
</blockquote>
<h4 id="单个插槽"><a href="#单个插槽" class="headerlink" title="单个插槽"></a>单个插槽</h4><blockquote>
<p>在小程序中，默认每个组定义组件中只允许使用一个<code>&lt;slot&gt;</code>进行占位，这种个数上的限制叫做单个插槽。</p>
</blockquote>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!-- 组件的封装者 --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">view</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">view</span>&gt;</span>这里是组件的内部结点<span class="tag">&lt;/<span class="name">view</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- 对于不确定的内容，可以使用&lt;slot&gt;进行占位，具体的内容有组件的使用者决定 --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">slot</span>&gt;</span><span class="tag">&lt;/<span class="name">slot</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">view</span>&gt;</span></span><br></pre></td></tr></table></figure>

<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!-- 组件的使用者 --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">component-tag-name</span>&gt;</span></span><br><span class="line">	<span class="comment">&lt;!-- 这部分内容将被放置在组件&lt;slot&gt;的位置上 --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">view</span>&gt;</span>这里是插入到组件slot中的内容<span class="tag">&lt;/<span class="name">view</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">component-tag-name</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h4 id="启用多个插槽"><a href="#启用多个插槽" class="headerlink" title="启用多个插槽"></a>启用多个插槽</h4><blockquote>
<p>在小程序的自定义组件中，需要使用多<code>&lt;slot&gt;</code>插槽时，可以在组件的.js文件中，通过如下方式进行启用。</p>
</blockquote>
<p>示例代码如下：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="title class_">Component</span>(&#123;</span><br><span class="line">    <span class="attr">options</span>: &#123;</span><br><span class="line">        <span class="attr">multipleSlots</span>: <span class="literal">true</span> <span class="comment">//在组件定义时的选项中启用多slot支持</span></span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="attr">properties</span>: &#123; <span class="comment">/* ... */</span> &#125;,</span><br><span class="line">    <span class="attr">methods</span>: &#123; <span class="comment">/* ... */</span> &#125;</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>

<h4 id="定义多个插槽"><a href="#定义多个插槽" class="headerlink" title="定义多个插槽"></a>定义多个插槽</h4><blockquote>
<p>可以在组件的.wxml中使用多个<code>&lt;slot&gt;</code>标签，以不同的name来区分不同的插槽。示例代码如下：</p>
</blockquote>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!-- 组件模板 --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">view</span>&gt;</span></span><br><span class="line">	<span class="comment">&lt;!-- name 为 before 的第一个slot插槽 --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">slot</span> <span class="attr">name</span>=<span class="string">&quot;before&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">slot</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">view</span>&gt;</span>这是一段固定的文本内容<span class="tag">&lt;/<span class="name">view</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- name 为 after 的第二个slot插槽 --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">slot</span> <span class="attr">name</span>=<span class="string">&quot;after&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">slot</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">view</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h3 id="父子组件之间的通信"><a href="#父子组件之间的通信" class="headerlink" title="父子组件之间的通信"></a>父子组件之间的通信</h3><h4 id="3种通信方式"><a href="#3种通信方式" class="headerlink" title="3种通信方式"></a>3种通信方式</h4><p><strong>1、属性绑定</strong></p>
<p>用于父组件向子组件的指定属性设置数据，仅能设置JSON兼容的数据（只能传递数据，不能传递方法）</p>
<p><strong>2、事件绑定</strong></p>
<p>用于子组件向父组件传递数据，可以传递任意数据</p>
<p><strong>3、获取组件实例</strong></p>
<p>父组件还可以通过<code>this.selectComponent()</code>获取子组件实例对象</p>
<p>这样就可以直接访问子组件的任意数据和方法</p>
<h5 id="属性绑定"><a href="#属性绑定" class="headerlink" title="属性绑定"></a>属性绑定</h5><blockquote>
<p>属性绑定用于实现父向子传值，而且只能传递普通类型的数据，无法将方法传递给子组件。父组件的示例代码如下：</p>
</blockquote>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//父组件的data结点</span></span><br><span class="line"><span class="attr">data</span>: &#123;</span><br><span class="line">	<span class="attr">count</span>: <span class="number">0</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">//父组件的wxml结构</span><br><span class="line"><span class="tag">&lt;<span class="name">my-test3</span> <span class="attr">count</span>=<span class="string">&quot;&#123;&#123;count&#125;&#125;&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">my-test3</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">view</span>&gt;</span>父组件中，count值为： &#123;&#123;count&#125;&#125;<span class="tag">&lt;/<span class="name">view</span>&gt;</span></span><br></pre></td></tr></table></figure>

<blockquote>
<p>子组件在properties结点中声明对应的属性并使用。示例代码如下：</p>
</blockquote>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//子组件的properties结点</span></span><br><span class="line"><span class="attr">properties</span>: &#123;</span><br><span class="line">    <span class="attr">count</span>: <span class="title class_">Number</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">//子组件的wxml结构</span><br><span class="line"><span class="tag">&lt;<span class="name">text</span>&gt;</span>子组件中，count值为：&#123;&#123;count&#125;&#125;<span class="tag">&lt;/<span class="name">text</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h5 id="事件绑定"><a href="#事件绑定" class="headerlink" title="事件绑定"></a>事件绑定</h5><blockquote>
<p>事件绑定用于实现子向父传值，可以传递任何类型的数据。使用步骤如下：</p>
<blockquote>
<p>1、在父组件的.js中，定义一个函数，这个函数即将通过自定义事件的形式，传递给子组件</p>
<p>2、在父组件的wxml中，通过自定义事件的形式，将步骤1中定义的函数引用，传递给子组件</p>
<p>3、在子组件的js中，通过调用<code>this.triggerEvent(&#39;自定义事件名称&#39;, &#123;/* 参数对象 */&#125;)</code>,将数据发送到父组件</p>
<p>4、在父组件的js中，通过e.detail获取到子组件传递过来的数据</p>
</blockquote>
</blockquote>
<p><strong>每个步骤的具体操作：</strong></p>
<blockquote>
<p>步骤1：在父组件的js中，定义一个函数，这个函数即将通过自定义事件的形式，传递给子组件。</p>
</blockquote>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//在父组件中定义syncCount方法</span></span><br><span class="line"><span class="comment">//将来，这个方法会被传递给子组件，供子组件进行调用</span></span><br><span class="line"><span class="title function_">syncCount</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;syncCount&#x27;</span>)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<blockquote>
<p>步骤2：在父组件的wxml中，通过自定义事件的形式，将步骤1中定义的函数引用，传递给子组件</p>
</blockquote>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!-- 使用bind:自定义事件名称（推荐：结构清晰） --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">my-test3</span> <span class="attr">count</span>=<span class="string">&quot;&#123;&#123;count&#125;&#125;&quot;</span> <span class="attr">bind:sync</span>=<span class="string">&quot;syncCount&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">my-test3</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!-- 或在bind后面直接写上自定义事件名称 --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">my-test3</span> <span class="attr">count</span>=<span class="string">&quot;&#123;&#123;count&#125;&#125;&quot;</span> <span class="attr">bindsync</span>=<span class="string">&quot;syncCount&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">my-test3</span>&gt;</span></span><br></pre></td></tr></table></figure>

<blockquote>
<p>步骤3：在子组件的js中，通过调用<code>this.triggerEvent(&#39;自定义事件名称&#39;, &#123;/* 参数对象 */&#125;)</code>,将数据发送到父组件。</p>
</blockquote>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">//子组件的wxml结构</span><br><span class="line"><span class="tag">&lt;<span class="name">text</span>&gt;</span>子组件中，count值为：&#123;&#123;count&#125;&#125;<span class="tag">&lt;/<span class="name">text</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">button</span> <span class="attr">type</span>=<span class="string">&quot;primary&quot;</span> <span class="attr">bindtap</span>=<span class="string">&quot;addCount&quot;</span>&gt;</span>+1<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br></pre></td></tr></table></figure>

<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//子组件的js代码</span></span><br><span class="line"><span class="attr">methods</span>: &#123;</span><br><span class="line">    <span class="title function_">addCount</span>(<span class="params"></span>) &#123;</span><br><span class="line">        <span class="variable language_">this</span>.<span class="title function_">setData</span>(&#123;</span><br><span class="line">            <span class="attr">count</span>: <span class="variable language_">this</span>.<span class="property">properties</span>.<span class="property">count</span> + <span class="number">1</span></span><br><span class="line">        &#125;)</span><br><span class="line">        <span class="variable language_">this</span>.<span class="title function_">triggerEvent</span>(<span class="string">&#x27;sync&#x27;</span>, &#123;<span class="attr">value</span>: <span class="variable language_">this</span>.<span class="property">properties</span>.<span class="property">count</span>&#125;)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<blockquote>
<p>步骤4：在父组件的js中，通过e.detail获取到子组件传递过来的数据。</p>
</blockquote>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="title function_">syncCount</span>(<span class="params">e</span>) &#123;</span><br><span class="line">    <span class="variable language_">this</span>.<span class="title function_">setData</span>(&#123;</span><br><span class="line">        <span class="attr">count</span>: e.<span class="property">detail</span>.<span class="property">value</span></span><br><span class="line">    &#125;)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h5 id="获取组件实例"><a href="#获取组件实例" class="headerlink" title="获取组件实例"></a>获取组件实例</h5><blockquote>
<p>可在父组件里调用this.selectComponent(“id或class选择器”)，获取子组件的实例对象，从而直接访问子组件的任意数据和方法。调用时需要传入一个选择器，例如this.selectComponent(“.my-component”)。</p>
</blockquote>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!-- wxml结构 --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">my-test3</span> <span class="attr">count</span>=<span class="string">&quot;&#123;&#123;count&#125;&#125;&quot;</span> <span class="attr">bind:sync</span>=<span class="string">&quot;syncCount&quot;</span> <span class="attr">class</span>=<span class="string">&quot;customA&quot;</span> <span class="attr">id</span>=<span class="string">&quot;cA&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">my-test3</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">button</span> <span class="attr">bindtap</span>=<span class="string">&quot;getChild&quot;</span>&gt;</span>获取子组件实例<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br></pre></td></tr></table></figure>

<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="title function_">getChild</span>(<span class="params"></span>) &#123; <span class="comment">//按钮的tap事件处理函数</span></span><br><span class="line">    <span class="comment">//切记下面参数不能传递标签选择器 &#x27;my-test3&#x27;，不然返回的是 null</span></span><br><span class="line">    <span class="keyword">const</span> child = <span class="variable language_">this</span>.<span class="title function_">selectComponent</span>(<span class="string">&#x27;.customA&#x27;</span>) <span class="comment">//也可以传递id选择器 #cA</span></span><br><span class="line">    child.<span class="title function_">setData</span>(&#123; <span class="attr">count</span>: child.<span class="property">properties</span>.<span class="property">count</span> + <span class="number">1</span> &#125;) <span class="comment">// 调用子组件的setData方法</span></span><br><span class="line">    child.<span class="title function_">addCount</span>() <span class="comment">// 调用子组件的 addCount 方法</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="behaviors的使用"><a href="#behaviors的使用" class="headerlink" title="behaviors的使用"></a>behaviors的使用</h3><blockquote>
<p>behaviors是小程序中，用于实现组件间代码共享的特性，类似于Vue.js中的“ mixins ”</p>
</blockquote>
<h4 id="behaviors的工作方式"><a href="#behaviors的工作方式" class="headerlink" title="behaviors的工作方式"></a>behaviors的工作方式</h4><p>每个behavior可以包含一组属性、数据、生命周期函数和方法。组件引用它时，它的属性、数据和方法会被合并到组件中。每个组件可以引用多个behavior, behavior也可以引用其它behavior。</p>
<h4 id="创建behavior"><a href="#创建behavior" class="headerlink" title="创建behavior"></a>创建behavior</h4><blockquote>
<p>调用Behavior(Object object)方法即可创建一个共享的behavior实例对象，供所有的组件使用：</p>
</blockquote>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//调用Behavior() 方法，创建实例对象</span></span><br><span class="line"><span class="comment">//并使用module.exports将behavior实例对象共享出去</span></span><br><span class="line"><span class="variable language_">module</span>.<span class="property">exports</span> = <span class="title class_">Behavior</span>(&#123;</span><br><span class="line">    <span class="comment">//属性结点</span></span><br><span class="line">    <span class="attr">properties</span>: &#123;&#125;,</span><br><span class="line">    <span class="comment">//私有数据结点</span></span><br><span class="line">    <span class="attr">data</span>: &#123; <span class="attr">username</span>: <span class="string">&#x27;zs&#x27;</span> &#125;,</span><br><span class="line">    <span class="comment">//事件处理函数和自定义方法结点</span></span><br><span class="line">    <span class="attr">methods</span>: &#123;&#125;,</span><br><span class="line">    <span class="comment">//其它结点...</span></span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>

<h4 id="导入并使用behavior"><a href="#导入并使用behavior" class="headerlink" title="导入并使用behavior"></a>导入并使用behavior</h4><blockquote>
<p>在组件中，使用require()方法导入需要的behavior，挂载后即可访问behavior中的数据或方法，示例代码如下：</p>
</blockquote>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//1、使用require()导入需要的自定义behavior模块</span></span><br><span class="line"><span class="keyword">const</span> myBehavior = <span class="built_in">require</span>(<span class="string">&quot;../../behaviors/my-behavior&quot;</span>)</span><br><span class="line"><span class="title class_">Component</span>(&#123;</span><br><span class="line">    <span class="comment">//2、将导入的behavior实例对象，挂载到behaviors数组结点中，即可生效</span></span><br><span class="line">    <span class="attr">behaviors</span>: [myBehavior],</span><br><span class="line">    <span class="comment">//组件的其它结点...</span></span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>

<h4 id="behavior中所有可用的结点"><a href="#behavior中所有可用的结点" class="headerlink" title="behavior中所有可用的结点"></a>behavior中所有可用的结点</h4><table>
<thead>
<tr>
<th>可用的结点</th>
<th>类型</th>
<th>是否必填</th>
<th>描述</th>
</tr>
</thead>
<tbody><tr>
<td><strong>properties</strong></td>
<td>Object Map</td>
<td>否</td>
<td>同组件的属性</td>
</tr>
<tr>
<td><strong>data</strong></td>
<td>Object</td>
<td>否</td>
<td>同组件的数据</td>
</tr>
<tr>
<td><strong>methods</strong></td>
<td>Object</td>
<td>否</td>
<td>同自定义组件的方法</td>
</tr>
<tr>
<td><strong>behaviors</strong></td>
<td>String Array</td>
<td>否</td>
<td>引入其它的behavior</td>
</tr>
<tr>
<td>created</td>
<td>Function</td>
<td>否</td>
<td>生命周期函数</td>
</tr>
<tr>
<td>attached</td>
<td>Function</td>
<td>否</td>
<td>生命周期函数</td>
</tr>
<tr>
<td>ready</td>
<td>Function</td>
<td>否</td>
<td>生命周期函数</td>
</tr>
<tr>
<td>moved</td>
<td>Function</td>
<td>否</td>
<td>生命周期函数</td>
</tr>
<tr>
<td>detached</td>
<td>Function</td>
<td>否</td>
<td>生命周期函数</td>
</tr>
</tbody></table>
<h4 id="同名字段的覆盖和组合规则"><a href="#同名字段的覆盖和组合规则" class="headerlink" title="同名字段的覆盖和组合规则"></a>同名字段的覆盖和组合规则</h4><p><a target="_blank" rel="noopener" href="https://developers.weixin.qq.com/miniprogram/dev/framework/custom-component/behaviors.html">https://developers.weixin.qq.com/miniprogram/dev/framework/custom-component/behaviors.html</a></p>
<h3 id="使用npm包"><a href="#使用npm包" class="headerlink" title="使用npm包"></a>使用npm包</h3><h4 id="小程序对npm的支持与限制"><a href="#小程序对npm的支持与限制" class="headerlink" title="小程序对npm的支持与限制"></a>小程序对npm的支持与限制</h4><blockquote>
<p>目前，小程序中已经支持使用npm安装第三方包，从而来提高小程序的开发效率。但是，在小程序中使用npm包有如下3个限制：</p>
<ul>
<li>不支持依赖于 Node.js 内置库的包</li>
<li>不支持依赖于浏览器内置对象的包</li>
<li>不支持依赖于 C++ 插件的包</li>
</ul>
</blockquote>
<blockquote>
<p>总结：虽然npm上的包有千千万，但是能供小程序使用的包却不多</p>
</blockquote>
<h4 id="Vant-Weapp"><a href="#Vant-Weapp" class="headerlink" title="Vant Weapp"></a>Vant Weapp</h4><p>Vant Weapp是有赞前端团队开源的一套小程序UI组件库，阻力开发者快速搭建小程序引用。他所使用的是MIT开源许可协议，对商业使用比较友好。</p>
<p>官方文档地址：<a target="_blank" rel="noopener" href="https://youzan.github.io/vant-weapp">https://youzan.github.io/vant-weapp</a></p>
<h4 id="安装Vant组件库"><a href="#安装Vant组件库" class="headerlink" title="安装Vant组件库"></a>安装Vant组件库</h4><blockquote>
<p>在小程序项目中，安装Vant组件库主要分为如下3步：</p>
<ol>
<li>通过npm安装（建议指定版本为@1.3.3）</li>
<li>构建npm包</li>
<li>修改app.json</li>
</ol>
</blockquote>
<p>详细操作步骤，可参考Vant官方提供的快速上手教程：<a target="_blank" rel="noopener" href="https://youzan.github.io/vant-weapp/#/quickstart">快速上手 - Vant Weapp (youzan.github.io)</a></p>
<p>如果项目目录中没有包管理配置文件<code>package.json</code>,我们需要执行 <code>npm init -y</code></p>
<h4 id="使用Vant组件"><a href="#使用Vant组件" class="headerlink" title="使用Vant组件"></a>使用Vant组件</h4><p>安装完Vant组件库之后，可以在app.json的usingComponents结点中引入需要的组件，即可在wxml中直接使用组件。示例代码如下：</p>
<figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//app.json</span></span><br><span class="line"><span class="attr">&quot;usingComponents&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">    <span class="attr">&quot;van-button&quot;</span><span class="punctuation">:</span> <span class="string">&quot;@vant/weapp/button/index&quot;</span></span><br><span class="line"><span class="punctuation">&#125;</span></span><br></pre></td></tr></table></figure>

<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">//页面的.wxml结构</span><br><span class="line"><span class="tag">&lt;<span class="name">van-button</span> <span class="attr">type</span>=<span class="string">&quot;primary&quot;</span>&gt;</span>按钮<span class="tag">&lt;/<span class="name">van-button</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h3 id="CSS变量的使用"><a href="#CSS变量的使用" class="headerlink" title="CSS变量的使用"></a>CSS变量的使用</h3><p>例如在.html中写如下代码：</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">html&#123;</span><br><span class="line">	/*定义CSS变量*/</span><br><span class="line">	--main-color: #C00000;</span><br><span class="line">&#125;</span><br><span class="line">.box1, .box2 &#123;</span><br><span class="line">	background-color: var(--main-color);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<blockquote>
<p>解释：在作用域为html中定义一个CSS变量</p>
</blockquote>
<h4 id="定制全局主题样式"><a href="#定制全局主题样式" class="headerlink" title="定制全局主题样式"></a>定制全局主题样式</h4><p>Vant Weapp使用CSS变量来实现定制主题。关于CSS变量的基本用法，请参考MDN文档：<a target="_blank" rel="noopener" href="https://developer.mozilla.org/zh-CN/docs/Web/CSS/Using_CSS_custom_properties">https://developer.mozilla.org/zh-CN/docs/Web/CSS/Using_CSS_custom_properties</a></p>
<blockquote>
<p>在app.wxss中，写入CSS变量，即可对全局生效</p>
</blockquote>
<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/*app.wxss*/</span></span><br><span class="line">page &#123;</span><br><span class="line">    <span class="comment">/*定制警告按钮的背景颜色和边框颜色*/</span></span><br><span class="line">    <span class="attr">--button-danger-background-color</span>: <span class="number">#C00000</span>;</span><br><span class="line">    <span class="attr">--button-danger-border-color</span>: <span class="number">#D60000</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<blockquote>
<p>解释：因为每个页面的根标签都是<code>&lt;page&gt;</code>所以将CSS变量配置到page中每个页面都可访问到这些变量了</p>
</blockquote>
<h3 id="小程序API的promise化"><a href="#小程序API的promise化" class="headerlink" title="小程序API的promise化"></a>小程序API的promise化</h3><h4 id="基于回调函数的异步API的缺点"><a href="#基于回调函数的异步API的缺点" class="headerlink" title="基于回调函数的异步API的缺点"></a>基于回调函数的异步API的缺点</h4><blockquote>
<p>默认情况下，小程序官方提供的异步API都是基于回调函数实现的，例如，网络请求的API需要按照如下的方式调用：</p>
</blockquote>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">wx.<span class="title function_">request</span>(&#123;</span><br><span class="line">    <span class="attr">method</span>: <span class="string">&#x27;&#x27;</span>,</span><br><span class="line">    <span class="attr">url</span>: <span class="string">&#x27;&#x27;</span>,</span><br><span class="line">    <span class="attr">data</span>: &#123;&#125;,</span><br><span class="line">    <span class="attr">success</span>: <span class="function">() =&gt;</span> &#123;&#125;,<span class="comment">//请求成功的回调函数</span></span><br><span class="line">    <span class="attr">fail</span>: <span class="function">() =&gt;</span> &#123;&#125;, <span class="comment">//请求失败的回调函数</span></span><br><span class="line">    <span class="attr">complete</span>: <span class="function">() =&gt;</span> &#123;&#125; <span class="comment">//请求完成的回调函数</span></span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>

<h4 id="什么是API-Promise化"><a href="#什么是API-Promise化" class="headerlink" title="什么是API Promise化"></a>什么是API Promise化</h4><p>API Promise化，指的是通过额外的配置，将官方提供的、基于回调函数的异步API，升级改造为基于Promise的异步API，从而提高代码的可读性、维护性，避免回调地狱的问题。</p>
<h4 id="实现API-Promise化"><a href="#实现API-Promise化" class="headerlink" title="实现API Promise化"></a>实现API Promise化</h4><p>在小程序中，实现API Promise化主要依赖于miniprogram-api-promise这个第三方的npm包。它的安装和使用步骤如下：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm install --save miniprogram-api-promise@1.0.4</span><br></pre></td></tr></table></figure>

<p><strong>注意事项：（重要）</strong></p>
<blockquote>
<p><strong>然后找到项目的根目录，删除<code>miniprogram_npm</code>文件夹;然后点击<code>工具</code>&#x3D;&gt;<code>构建npm</code></strong></p>
</blockquote>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//在小程序入口文件中(app.js),只需调用一次promisifyAll()方法，</span></span><br><span class="line"><span class="comment">//即可实现异步API的Promise化</span></span><br><span class="line"><span class="keyword">import</span> &#123; promisifyAll &#125; <span class="keyword">from</span> <span class="string">&#x27;miniprogram-api-promise&#x27;</span></span><br><span class="line"><span class="keyword">const</span> wxp = wx.<span class="property">p</span> = &#123;&#125;</span><br><span class="line"><span class="comment">//promisify all wx&#x27;s api</span></span><br><span class="line"><span class="title function_">promisifyAll</span>(wx, wxp)<span class="comment">//将wx上的函数进行promise化，然后将其挂载到wxp上</span></span><br></pre></td></tr></table></figure>

<h4 id="调用Promise化之后的异步API"><a href="#调用Promise化之后的异步API" class="headerlink" title="调用Promise化之后的异步API"></a>调用Promise化之后的异步API</h4><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">//页面的.wxml结构</span><br><span class="line"><span class="tag">&lt;<span class="name">van-button</span> <span class="attr">type</span>=<span class="string">&quot;danger&quot;</span> <span class="attr">bindtap</span>=<span class="string">&quot;getInfo&quot;</span>&gt;</span>vant按钮<span class="tag">&lt;/<span class="name">van-button</span>&gt;</span></span><br></pre></td></tr></table></figure>

<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//在页面的.js文件中，定义对应的tap事件处理函数</span></span><br><span class="line"><span class="keyword">async</span> <span class="title function_">getInfo</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="keyword">const</span> &#123;<span class="attr">data</span>: res&#125; = <span class="keyword">await</span> wx.<span class="property">p</span>.<span class="title function_">request</span>(&#123;</span><br><span class="line">        <span class="attr">method</span>: <span class="string">&#x27;GET&#x27;</span>,</span><br><span class="line">        <span class="attr">url</span>: <span class="string">&#x27;https://www.xxx.cn/api/get&#x27;</span>,</span><br><span class="line">        <span class="attr">data</span>: &#123; <span class="attr">name</span>: <span class="string">&#x27;zs&#x27;</span>, <span class="attr">age</span>: <span class="number">20</span> &#125;</span><br><span class="line">    &#125;)</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(res)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="全局数据共享"><a href="#全局数据共享" class="headerlink" title="全局数据共享"></a>全局数据共享</h3><blockquote>
<p>全局数据共享（状态管理）是为了解决组件之间数据共享的问题</p>
<p>开发中常用的全局数据共享方案有：Vuwx、Redux、Mobx等。</p>
</blockquote>
<p><img src="https://raw.githubusercontent.com/ZhangjunqiGithub/picture/master/Data_Share.jpg" alt="数据共享"></p>
<h4 id="安装MobX相关的包"><a href="#安装MobX相关的包" class="headerlink" title="安装MobX相关的包"></a>安装MobX相关的包</h4><blockquote>
<p>在项目中运行如下的命令，安装MobX相关的包：</p>
</blockquote>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm install --save mobx-miniprogram@4.13.2 mobx-miniprogram-bindings@1.2.1</span><br></pre></td></tr></table></figure>

<blockquote>
<p>注意：MobX相关的包安装完毕之后，记得删除miniprogram_npm目录后，重新构建npm</p>
</blockquote>
<h4 id="小程序中的全局数据共享方案"><a href="#小程序中的全局数据共享方案" class="headerlink" title="小程序中的全局数据共享方案"></a>小程序中的全局数据共享方案</h4><blockquote>
<p>在小程序中，可使用mobx-miniprogram配合mobx-miniprogram-bindings实现全局数据共享。其中：</p>
<ul>
<li>mobx-miniprogram用来创建Store实例对象</li>
<li>mobx-miniprogram-bindings用来把Store中的共享数据或方法，绑定到组件或页面中使用</li>
</ul>
</blockquote>
<p><strong>先在项目目录下创建一个store文件夹，然后在该文件夹下创建一个store.js</strong></p>
<p><code>store.js:</code></p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//在这个JS文件中，专门来创建Store的实例对象</span></span><br><span class="line"><span class="keyword">import</span> &#123; observable, action &#125; <span class="keyword">from</span> <span class="string">&#x27;mobx-miniprogram&#x27;</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">const</span> store = <span class="title function_">observable</span>(&#123;</span><br><span class="line">    <span class="comment">// 数据字段</span></span><br><span class="line">    <span class="attr">numA</span>: <span class="number">1</span>,</span><br><span class="line">    <span class="attr">numB</span>: <span class="number">2</span>,</span><br><span class="line">    <span class="comment">//计算属性</span></span><br><span class="line">    <span class="keyword">get</span> <span class="title function_">sum</span>() &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="variable language_">this</span>.<span class="property">numA</span> + <span class="variable language_">this</span>.<span class="property">numB</span></span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="comment">//actions 方法，用来修改store中的数据</span></span><br><span class="line">    <span class="attr">updateNum1</span>: <span class="title function_">action</span>(<span class="keyword">function</span> (<span class="params">step</span>) &#123;</span><br><span class="line">        <span class="variable language_">this</span>.<span class="property">numA</span> += step</span><br><span class="line">    &#125;),</span><br><span class="line">    <span class="attr">updateNum2</span>: <span class="title function_">action</span>(<span class="keyword">function</span> (<span class="params">step</span>) &#123;</span><br><span class="line">        <span class="variable language_">this</span>.<span class="property">numB</span> += step</span><br><span class="line">    &#125;)</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>

<h4 id="将Store中的成员绑定到页面中"><a href="#将Store中的成员绑定到页面中" class="headerlink" title="将Store中的成员绑定到页面中"></a>将Store中的成员绑定到页面中</h4><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//页面的.js文件</span></span><br><span class="line"><span class="keyword">import</span> &#123; createStoreBindings &#125; <span class="keyword">from</span> <span class="string">&#x27;mobx-miniprogram-binddings&#x27;</span></span><br><span class="line"><span class="keyword">import</span> &#123; store &#125; <span class="keyword">from</span> <span class="string">&#x27;../../store/store&#x27;</span></span><br><span class="line"><span class="title class_">Page</span>(&#123;</span><br><span class="line">    <span class="attr">onLoad</span>: <span class="keyword">function</span> (<span class="params"></span>) &#123; <span class="comment">// 生命周期函数--监听页面加载</span></span><br><span class="line">        <span class="variable language_">this</span>.<span class="property">storeBindings</span> = <span class="title function_">createStoreBindings</span>(<span class="variable language_">this</span>, &#123;</span><br><span class="line">            store,</span><br><span class="line">            <span class="attr">fields</span>: [<span class="string">&#x27;numA&#x27;</span>, <span class="string">&#x27;numB&#x27;</span>, <span class="string">&#x27;sum&#x27;</span>],</span><br><span class="line">            <span class="attr">actions</span>: [<span class="string">&#x27;updateNum1&#x27;</span>]</span><br><span class="line">        &#125;)</span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="attr">onUnload</span>: <span class="keyword">function</span> (<span class="params"></span>) &#123;<span class="comment">// 生命周期函数--监听页面卸载</span></span><br><span class="line">        <span class="variable language_">this</span>.<span class="property">storeBindings</span>.<span class="title function_">destroyStoreBindings</span>()</span><br><span class="line">    &#125;</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>

<h4 id="在页面上使用Store中的成员"><a href="#在页面上使用Store中的成员" class="headerlink" title="在页面上使用Store中的成员"></a>在页面上使用Store中的成员</h4><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">//页面的.wxml结构</span><br><span class="line"><span class="tag">&lt;<span class="name">view</span>&gt;</span>&#123;&#123;numA&#125;&#125; + &#123;&#123;numB&#125;&#125; + &#123;&#123;sum&#125;&#125;<span class="tag">&lt;/<span class="name">view</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">button</span> <span class="attr">bindtap</span>=<span class="string">&quot;btnHandler1&quot;</span> <span class="attr">data-step</span>=<span class="string">&quot;&#123;&#123;1&#125;&#125;&quot;</span>&gt;</span>numA + 1 <span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">button</span> <span class="attr">bindtap</span>=<span class="string">&quot;btnHandler1&quot;</span> <span class="attr">data-step</span>=<span class="string">&quot;&#123;&#123;-1&#125;&#125;&quot;</span>&gt;</span>numA - 1 <span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br></pre></td></tr></table></figure>

<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//按钮tap事件的处理函数</span></span><br><span class="line"><span class="title function_">btnHandler1</span>(<span class="params">e</span>) &#123;</span><br><span class="line">    <span class="variable language_">this</span>.<span class="title function_">updateNum1</span>(e.<span class="property">target</span>.<span class="property">dataset</span>.<span class="property">step</span>)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="将Store中的成员绑定到组件中"><a href="#将Store中的成员绑定到组件中" class="headerlink" title="将Store中的成员绑定到组件中"></a>将Store中的成员绑定到组件中</h4><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; createStoreBindings &#125; <span class="keyword">from</span> <span class="string">&#x27;mobx-miniprogram-binddings&#x27;</span></span><br><span class="line"><span class="keyword">import</span> &#123; store &#125; <span class="keyword">from</span> <span class="string">&#x27;../../store/store&#x27;</span></span><br><span class="line"><span class="title class_">Component</span>(&#123;</span><br><span class="line">    store, <span class="comment">//指定要绑定的Store</span></span><br><span class="line">    <span class="attr">fields</span>: &#123;<span class="comment">//指定要绑定的字段数据</span></span><br><span class="line">        <span class="attr">numA</span>: <span class="function">() =&gt;</span> store.<span class="property">numA</span>, <span class="comment">//绑定字段的第1种方式</span></span><br><span class="line">        <span class="attr">numB</span>: <span class="function">(<span class="params">store</span>) =&gt;</span> store.<span class="property">numB</span>,  <span class="comment">//绑定字段的第2种方式</span></span><br><span class="line">        <span class="attr">sum</span>: <span class="string">&#x27;sum&#x27;</span>  <span class="comment">//绑定字段的第3种方式</span></span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="attr">actions</span>: &#123;<span class="comment">//指定要绑定的方法</span></span><br><span class="line">        <span class="attr">updateNum2</span>: <span class="string">&#x27;updateNum2&#x27;</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>

<h3 id="分包"><a href="#分包" class="headerlink" title="分包"></a>分包</h3><blockquote>
<p>分包指的是把一个完整的小程序项目，按照需求划分为不同的子包，在构建时打包成不同的分包，用户在使用时按需进行加载。</p>
</blockquote>
<p><strong>分包的好处：</strong></p>
<blockquote>
<p>对小程序进行分包的好处主要有以下两点：</p>
<ul>
<li>可以优化小程序首次启动的下载时间</li>
<li>在多团队共同开发时可以更好的解耦协作</li>
</ul>
</blockquote>
<h4 id="分包前项目的构成"><a href="#分包前项目的构成" class="headerlink" title="分包前项目的构成"></a>分包前项目的构成</h4><blockquote>
<p>分包前，小程序项目中所有的页面和资源都被打包到了一起，导致整个项目体积过大，影响小程序首次启动的下载时间。</p>
</blockquote>
<p><img src="https://raw.githubusercontent.com/ZhangjunqiGithub/picture/master/fenbaoqian.jpg"></p>
<h4 id="分包后项目的构成"><a href="#分包后项目的构成" class="headerlink" title="分包后项目的构成"></a>分包后项目的构成</h4><blockquote>
<p>分包后，小程序项目由1个主包+多个分包组成：</p>
<ul>
<li>主包：一般只包含项目的启动页面或TabBar页面、以及所有分包都需要用到的一些公共资源</li>
<li>分包：只包含和当前分包有关的页面和私有资源</li>
</ul>
</blockquote>
<p><img src="https://raw.githubusercontent.com/ZhangjunqiGithub/picture/master/fenbaohou.jpg"></p>
<h4 id="分包的加载规则"><a href="#分包的加载规则" class="headerlink" title="分包的加载规则"></a>分包的加载规则</h4><blockquote>
<p>在小程序启动时，默认会下载主包并启动主包内页面</p>
<ul>
<li>tabBar页面需要放到主包中</li>
</ul>
<p>当用户进入分包内某个页面时，客户端会把对应分包下载下来，下载完成后再进行展示</p>
<ul>
<li>非tabBar页面可以按照功能的不同，划分为不同的分包之后，进行按需下载</li>
</ul>
</blockquote>
<h4 id="分包的体积限制"><a href="#分包的体积限制" class="headerlink" title="分包的体积限制"></a>分包的体积限制</h4><blockquote>
<p>目前，小程序分包的大小有以下两个限制：</p>
<ul>
<li>整个小程序所有分包大小不超过16M（主包+所有分包）</li>
<li>单个分包&#x2F;主包大小不能超过2M</li>
</ul>
</blockquote>
<h4 id="分包的使用"><a href="#分包的使用" class="headerlink" title="分包的使用"></a>分包的使用</h4><p>在app.json的subpackages结点中声明分包的结构</p>
<figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="punctuation">&#123;</span></span><br><span class="line">	<span class="attr">&quot;pages&quot;</span><span class="punctuation">:</span><span class="punctuation">[</span><span class="comment">//主包的所有页面</span></span><br><span class="line">        <span class="string">&quot;pages/index&quot;</span><span class="punctuation">,</span></span><br><span class="line">        <span class="string">&quot;pages/logs&quot;</span></span><br><span class="line">    <span class="punctuation">]</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;subpackages&quot;</span><span class="punctuation">:</span><span class="punctuation">[</span> <span class="comment">//通过subpackages结点，声明分包的结构</span></span><br><span class="line">        <span class="punctuation">&#123;</span></span><br><span class="line">            <span class="attr">&quot;root&quot;</span><span class="punctuation">:</span> <span class="string">&quot;packageA&quot;</span><span class="punctuation">,</span> <span class="comment">// 第一个分包的根目录</span></span><br><span class="line">            <span class="attr">&quot;name&quot;</span><span class="punctuation">:</span> <span class="string">&quot;pack1&quot;</span><span class="punctuation">,</span> <span class="comment">// 分包的别名</span></span><br><span class="line">            <span class="attr">&quot;pages&quot;</span><span class="punctuation">:</span> <span class="punctuation">[</span> <span class="comment">//当前分包下，所有页面的相对存放路径</span></span><br><span class="line">                <span class="string">&quot;pages/cat&quot;</span><span class="punctuation">,</span></span><br><span class="line">                <span class="string">&quot;pages/dog&quot;</span></span><br><span class="line">            <span class="punctuation">]</span></span><br><span class="line">        <span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line">        <span class="punctuation">&#123;</span></span><br><span class="line">            <span class="attr">&quot;root&quot;</span><span class="punctuation">:</span> <span class="string">&quot;packageB&quot;</span><span class="punctuation">,</span> <span class="comment">// 第二个分包的根目录</span></span><br><span class="line">            <span class="attr">&quot;name&quot;</span><span class="punctuation">:</span> <span class="string">&quot;pack2&quot;</span><span class="punctuation">,</span> <span class="comment">//分包的别名</span></span><br><span class="line">            <span class="attr">&quot;pages&quot;</span><span class="punctuation">:</span><span class="punctuation">[</span> <span class="comment">//当前分包下，所有页面的相对存放路径</span></span><br><span class="line">                <span class="string">&quot;pages/apple&quot;</span><span class="punctuation">,</span></span><br><span class="line">                <span class="string">&quot;pages/banana&quot;</span></span><br><span class="line">            <span class="punctuation">]</span></span><br><span class="line">        <span class="punctuation">&#125;</span></span><br><span class="line">    <span class="punctuation">]</span></span><br><span class="line"><span class="punctuation">&#125;</span></span><br></pre></td></tr></table></figure>

<h4 id="打包原则"><a href="#打包原则" class="headerlink" title="打包原则"></a>打包原则</h4><ul>
<li>小程序会按subpackages的配置进行分包，subpackages之外的目录将被打包到主包中</li>
<li>主包也可以有自己的pages（即最外层的pages字段）</li>
<li>tabBar页面必须在主包内</li>
<li>分包之间不能互相嵌套</li>
</ul>
<h4 id="引用原则"><a href="#引用原则" class="headerlink" title="引用原则"></a>引用原则</h4><ul>
<li>主包<strong>无法引用</strong>分包内的私有资源</li>
<li>分包之间<strong>不能相互引用</strong>私有资源</li>
<li>分包<strong>可以引用</strong><code>主包内的</code>公共资源</li>
</ul>
<h3 id="独立分包"><a href="#独立分包" class="headerlink" title="独立分包"></a>独立分包</h3><blockquote>
<p><strong>独立分包本质上也是分包，只不过它比较特殊，可以独立于主包和其它分包而单独运行</strong></p>
</blockquote>
<p><strong>独立分包和普通分包的区别：</strong></p>
<blockquote>
<p>最主要的区别：是否依赖于主包才能运行</p>
<ul>
<li>普通分包必须依赖于主包才能运行</li>
<li>独立分包可以在不下载主包的情况下，独立运行</li>
</ul>
</blockquote>
<p><img src="https://raw.githubusercontent.com/ZhangjunqiGithub/picture/master/dulifenbao.jpg"></p>
<p><strong>独立分包的应用场景：</strong></p>
<blockquote>
<p>开发者可以按需将某些具有一定功能独立性的页面配置到独立分包中。原因如下：</p>
<ul>
<li>当小程序从普通的分包页面启动时，需要首先下载主包</li>
<li>而独立分包不依赖主包即可运行，可以很大程度上提升分包页面的启动速度</li>
</ul>
<blockquote>
<p>注意：一个小程序中可以有多个独立分包</p>
</blockquote>
</blockquote>
<p><strong>独立分包的配置方法：</strong></p>
<blockquote>
<p><strong>在分包的配置中添加一个配置：</strong><code>&quot;independent&quot;: true</code></p>
</blockquote>
<figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="punctuation">&#123;</span></span><br><span class="line">	<span class="attr">&quot;pages&quot;</span><span class="punctuation">:</span><span class="punctuation">[</span><span class="comment">//主包的所有页面</span></span><br><span class="line">        <span class="string">&quot;pages/index&quot;</span><span class="punctuation">,</span></span><br><span class="line">        <span class="string">&quot;pages/logs&quot;</span></span><br><span class="line">    <span class="punctuation">]</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;subpackages&quot;</span><span class="punctuation">:</span><span class="punctuation">[</span> <span class="comment">//通过subpackages结点，声明分包的结构</span></span><br><span class="line">        <span class="punctuation">&#123;</span></span><br><span class="line">            <span class="attr">&quot;root&quot;</span><span class="punctuation">:</span> <span class="string">&quot;packageA&quot;</span><span class="punctuation">,</span> <span class="comment">// 第一个分包的根目录</span></span><br><span class="line">            <span class="attr">&quot;name&quot;</span><span class="punctuation">:</span> <span class="string">&quot;pack1&quot;</span><span class="punctuation">,</span> <span class="comment">// 分包的别名</span></span><br><span class="line">            <span class="attr">&quot;pages&quot;</span><span class="punctuation">:</span> <span class="punctuation">[</span> <span class="comment">//当前分包下，所有页面的相对存放路径</span></span><br><span class="line">                <span class="string">&quot;pages/cat&quot;</span><span class="punctuation">,</span></span><br><span class="line">                <span class="string">&quot;pages/dog&quot;</span></span><br><span class="line">            <span class="punctuation">]</span></span><br><span class="line">        <span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line">        <span class="punctuation">&#123;</span></span><br><span class="line">            <span class="attr">&quot;root&quot;</span><span class="punctuation">:</span> <span class="string">&quot;packageB&quot;</span><span class="punctuation">,</span> <span class="comment">// 第二个分包的根目录</span></span><br><span class="line">            <span class="attr">&quot;name&quot;</span><span class="punctuation">:</span> <span class="string">&quot;pack2&quot;</span><span class="punctuation">,</span> <span class="comment">//分包的别名</span></span><br><span class="line">            <span class="attr">&quot;pages&quot;</span><span class="punctuation">:</span><span class="punctuation">[</span> <span class="comment">//当前分包下，所有页面的相对存放路径</span></span><br><span class="line">                <span class="string">&quot;pages/apple&quot;</span><span class="punctuation">,</span></span><br><span class="line">                <span class="string">&quot;pages/banana&quot;</span></span><br><span class="line">            <span class="punctuation">]</span><span class="punctuation">,</span></span><br><span class="line">            <span class="attr">&quot;independent&quot;</span><span class="punctuation">:</span> <span class="literal"><span class="keyword">true</span></span> <span class="comment">//通过此节点，声明当前packageB分包为&quot;独立分包&quot;</span></span><br><span class="line">        <span class="punctuation">&#125;</span></span><br><span class="line">    <span class="punctuation">]</span></span><br><span class="line"><span class="punctuation">&#125;</span></span><br></pre></td></tr></table></figure>

<p><strong>引用原则：</strong></p>
<blockquote>
<p>独立分包和普通分包以及主包之间是相互隔绝的，不能相互引用彼此的资源！例如：</p>
<ol>
<li>主包无法引用独立分包内的私有资源</li>
<li>独立分包之间，不能相互引用私有资源</li>
<li>独立分包和普通分包之间，不能相互引用私有资源</li>
</ol>
<blockquote>
<p>特别注意：独立分包中不能引用主包内的公共资源</p>
</blockquote>
</blockquote>
<p><strong>分包预下载：</strong></p>
<blockquote>
<p>分包预下载指的是：在进入小程序的某个页面时，由框架自动与下载可能需要的分包，从而提升进入后续分包页面时的启动速度。</p>
</blockquote>
<p><strong>配置分包的预下载：</strong></p>
<blockquote>
<p>预下载分包的行为，会在进入指定的页面时触发。在app.json中，使用preloadRule结点定义分包的预下载规则，示例代码如下：</p>
</blockquote>
<figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="punctuation">&#123;</span></span><br><span class="line">    <span class="attr">&quot;preloadRule&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span> <span class="comment">// 分包预下载的规则</span></span><br><span class="line">        <span class="attr">&quot;pages/contact/contact&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span> <span class="comment">// 触发分包预下载的页面路径</span></span><br><span class="line">            <span class="comment">//network 表示在指定的网络模式下进行预下载</span></span><br><span class="line">            <span class="comment">//可选值为：all（不限网络）和wifi（仅wifi模式下进行预下载）</span></span><br><span class="line">            <span class="comment">// 默认值为： wifi</span></span><br><span class="line">            <span class="attr">&quot;network&quot;</span><span class="punctuation">:</span> <span class="string">&quot;all&quot;</span><span class="punctuation">,</span></span><br><span class="line">            <span class="comment">// packages 表示进入页面后，预下载哪些分包</span></span><br><span class="line">            <span class="comment">//可以通过root 或 name指定预下载哪些分包</span></span><br><span class="line">            <span class="attr">&quot;packages&quot;</span><span class="punctuation">:</span> <span class="punctuation">[</span><span class="string">&quot;pkgA&quot;</span><span class="punctuation">]</span></span><br><span class="line">        <span class="punctuation">&#125;</span></span><br><span class="line">    <span class="punctuation">&#125;</span></span><br><span class="line"><span class="punctuation">&#125;</span></span><br></pre></td></tr></table></figure>

<p><strong>分包预下载的限制：</strong></p>
<blockquote>
<p>同一个分包中页面享有共同的预下载大小限额2M</p>
</blockquote>
<h3 id="自定义tabBar"><a href="#自定义tabBar" class="headerlink" title="自定义tabBar"></a>自定义tabBar</h3><blockquote>
<p>自定义tabBar分为3大步骤，分别是：</p>
<ol>
<li>配置信息</li>
<li>添加tabBar代码文件</li>
<li>编写tabBar代码</li>
</ol>
<blockquote>
<p>具体操作：</p>
<ol>
<li>在<code>app.json</code>中的tabBar配置项：<code>&quot;custom&quot;: true</code></li>
<li>在项目的根目录中创建一个文件夹命名为<code>custom-tab-bar</code></li>
<li>然后在该文件夹下创建一个component组件名为<code>index</code></li>
<li></li>
</ol>
</blockquote>
<blockquote>
<p>详细步骤，可以参考小程序官方给出的文档：<a target="_blank" rel="noopener" href="https://developers.weixin.qq.com/miniprogram/dev/framework/ability/custom-tabbar.html">https://developers.weixin.qq.com/miniprogram/dev/framework/ability/custom-tabbar.html</a></p>
</blockquote>
</blockquote>
<p><strong>使用vant中的组件来自定义tabBar:</strong></p>
<p>官方文档地址：<a target="_blank" rel="noopener" href="https://youzan.github.io/vant-weapp/#/tabbar">https://youzan.github.io/vant-weapp/#/tabbar</a></p>
<p><strong>基本使用：</strong></p>
<blockquote>
<p>按照官方文档操作</p>
</blockquote>
<p><strong>常见问题：</strong></p>
<ol>
<li><p><strong>徽标溢出：</strong></p>
<blockquote>
<p>数字小图标超出了tabBar的范围</p>
<p>原因：有一个外边距magin-bottom</p>
<p>解决方法：</p>
<blockquote>
<p>由于此处给magin-bottom赋值用的是CSS变量，所以我们只需要去修改对应变量的值就行了，具体操作如下：</p>
<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">//在custom-tab-bar/index<span class="selector-class">.wxss</span>中</span><br><span class="line"><span class="selector-class">.van-tabbar-item</span> &#123;</span><br><span class="line">    <span class="attr">--tabbar-item-margin-bottom</span>: <span class="number">0</span>; </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//在custom-tab-bar/index.js中</span></span><br><span class="line"><span class="title class_">Component</span>(&#123;</span><br><span class="line">    <span class="attr">options</span>: &#123;</span><br><span class="line">        <span class="attr">styleIsolation</span>: <span class="string">&#x27;shared&#x27;</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>

</blockquote>
</blockquote>
</li>
<li><p><strong>在组件中使用store里面的数据：</strong></p>
<blockquote>
<p>进行数据的绑定，将store里面的数据绑定到组件中进行使用</p>
</blockquote>
</li>
</ol>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//store.js在这个JS文件中，专门来创建Store的实例对象</span></span><br><span class="line"><span class="keyword">import</span> &#123; observable, action &#125; <span class="keyword">from</span> <span class="string">&#x27;mobx-miniprogram&#x27;</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">const</span> store = <span class="title function_">observable</span>(&#123;</span><br><span class="line">    <span class="comment">//数据字段</span></span><br><span class="line">    <span class="attr">numA</span>: <span class="number">1</span>,</span><br><span class="line">    <span class="attr">numB</span>: <span class="number">2</span>,</span><br><span class="line">    <span class="attr">activeTabBarIndex</span>: <span class="number">0</span>,</span><br><span class="line">    <span class="comment">//计算属性</span></span><br><span class="line">    <span class="title function_">get_sum</span>(<span class="params"></span>) &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="variable language_">this</span>.<span class="property">numA</span> + <span class="variable language_">this</span>.<span class="property">numB</span></span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="comment">//actions函数，专门来修改store中数据的值</span></span><br><span class="line">    <span class="attr">updateNum1</span>: <span class="title function_">action</span>(<span class="keyword">function</span>(<span class="params">step</span>) &#123;</span><br><span class="line">        <span class="variable language_">this</span>.<span class="property">numA</span> += step</span><br><span class="line">    &#125;),</span><br><span class="line">    <span class="attr">updateNum2</span>: <span class="title function_">action</span>(<span class="keyword">function</span>(<span class="params">step</span>) &#123;</span><br><span class="line">        <span class="variable language_">this</span>.<span class="property">numB</span> += step</span><br><span class="line">    &#125;),</span><br><span class="line">    <span class="attr">updateActiveTabBarIndex</span>: <span class="title function_">action</span>(<span class="keyword">function</span>(<span class="params">index</span>) &#123;</span><br><span class="line">        <span class="variable language_">this</span>.<span class="property">activeTabBarIndex</span> = index</span><br><span class="line">    &#125;)</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>

<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!--custom-tab-bar/index.wxml--&gt;</span></span><br><span class="line"><span class="comment">&lt;!--active-color属性可以设置tabBar下面文本文字的颜色--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">van-tabbar</span> <span class="attr">active</span>=<span class="string">&quot;&#123;&#123; active &#125;&#125;&quot;</span> <span class="attr">bind:change</span>=<span class="string">&quot;onChange&quot;</span> <span class="attr">active-color</span>=<span class="string">&quot;#13A7A0&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">van-tabbar-item</span> <span class="attr">wx:for</span>=<span class="string">&quot;&#123;&#123;list&#125;&#125;&quot;</span> <span class="attr">wx:key</span>=<span class="string">&quot;index&quot;</span> <span class="attr">info</span>=<span class="string">&quot;&#123;&#123;item.info ? item.info : &#x27;&#x27;&#125;&#125;&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">image</span> <span class="attr">slot</span>=<span class="string">&quot;icon&quot;</span> <span class="attr">src</span>=<span class="string">&quot;&#123;&#123;item.iconPath&#125;&#125;&quot;</span> <span class="attr">mode</span>=<span class="string">&quot;aspectFit&quot;</span> <span class="attr">style</span>=<span class="string">&quot;width: 25px; height: 25px;&quot;</span>/&gt;</span></span><br><span class="line">        &#123;&#123;item.text&#125;&#125;</span><br><span class="line">    <span class="tag">&lt;/<span class="name">van-tabbar-item</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">van-tabbar</span>&gt;</span></span><br></pre></td></tr></table></figure>

<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//custom-tab-bar/index.js</span></span><br><span class="line"><span class="keyword">import</span> &#123; storeBindingsBehavior &#125; <span class="keyword">from</span> <span class="string">&#x27;mobx-miniprogram-bindings&#x27;</span></span><br><span class="line"><span class="keyword">import</span> &#123; store &#125; <span class="keyword">from</span> <span class="string">&#x27;../store/store&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="title class_">Component</span>(&#123;</span><br><span class="line">	<span class="attr">options</span>: &#123;</span><br><span class="line">        <span class="attr">styleIsolation</span>: <span class="string">&#x27;shared&#x27;</span></span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="attr">behaviors</span>: [storeBindingsBehavior],</span><br><span class="line">    <span class="attr">storeBindings</span>: &#123;</span><br><span class="line">        store,</span><br><span class="line">        <span class="attr">fields</span>: &#123;</span><br><span class="line">            <span class="attr">sum</span>: <span class="string">&#x27;sum&#x27;</span>,</span><br><span class="line">            <span class="attr">active</span>: <span class="string">&#x27;activeTabBarIndex&#x27;</span></span><br><span class="line">        &#125;,</span><br><span class="line">        <span class="attr">actions</span>: &#123;</span><br><span class="line">            <span class="attr">updateActive</span>: <span class="string">&#x27;updateActiveTabBarIndex&#x27;</span></span><br><span class="line">        &#125;</span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="comment">//监听sum的变化,使store中sum的值和data中info的值保持一致</span></span><br><span class="line">    <span class="attr">observers</span>: &#123;</span><br><span class="line">        <span class="string">&#x27;sum&#x27;</span>: <span class="keyword">function</span> (<span class="params">val</span>) &#123;</span><br><span class="line">            <span class="variable language_">this</span>.<span class="title function_">setData</span>(&#123;</span><br><span class="line">                <span class="string">&#x27;list[1].info&#x27;</span>: val</span><br><span class="line">            &#125;)</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="comment">/*组件的属性列表*/</span></span><br><span class="line">    <span class="attr">properties</span>: &#123;</span><br><span class="line">        </span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="comment">/*组件的初始数据*/</span></span><br><span class="line">    <span class="comment">/*注意此处list里面的pagePath的开始要有“ / ”*/</span></span><br><span class="line">    <span class="attr">data</span>: &#123;</span><br><span class="line">        <span class="string">&quot;list&quot;</span>: [</span><br><span class="line">            &#123;</span><br><span class="line">                <span class="string">&quot;pagePath&quot;</span>: <span class="string">&quot;/pages/home/home&quot;</span>,</span><br><span class="line">                <span class="string">&quot;text&quot;</span>: <span class="string">&quot;首页&quot;</span>,</span><br><span class="line">                <span class="string">&quot;iconPath&quot;</span>: <span class="string">&quot;/images/tabs/home.png&quot;</span>,</span><br><span class="line">                <span class="string">&quot;selectedIconPath&quot;</span>: <span class="string">&quot;/images/tabs/home-active.png&quot;</span></span><br><span class="line">            &#125;,</span><br><span class="line">            &#123;</span><br><span class="line">                <span class="string">&quot;pagePath&quot;</span>: <span class="string">&quot;/pages/message/message&quot;</span>,</span><br><span class="line">                <span class="string">&quot;text&quot;</span>: <span class="string">&quot;消息&quot;</span>,</span><br><span class="line">                <span class="string">&quot;iconPath&quot;</span>: <span class="string">&quot;/images/tabs/message.png&quot;</span>,</span><br><span class="line">                <span class="string">&quot;selectedIconPath&quot;</span>: <span class="string">&quot;/images/tabs/message-active.png&quot;</span>,</span><br><span class="line">                <span class="attr">info</span>: <span class="number">0</span></span><br><span class="line">            &#125;,</span><br><span class="line">            &#123;</span><br><span class="line">                <span class="string">&quot;pagePath&quot;</span>: <span class="string">&quot;/pages/contact/contact&quot;</span>,</span><br><span class="line">                <span class="string">&quot;text&quot;</span>: <span class="string">&quot;联系我们&quot;</span>,</span><br><span class="line">                <span class="string">&quot;iconPath&quot;</span>: <span class="string">&quot;/images/tabs/contact.png&quot;</span>,</span><br><span class="line">                <span class="string">&quot;selectedIconPath&quot;</span>: <span class="string">&quot;/images/tabs/contact-active.png&quot;</span></span><br><span class="line">            &#125;</span><br><span class="line">        ]</span><br><span class="line">	&#125;,</span><br><span class="line">    <span class="comment">/*组件的方法列表*/</span></span><br><span class="line">    <span class="attr">methods</span>: &#123;</span><br><span class="line">        <span class="title function_">onChange</span>(<span class="params">event</span>) &#123;</span><br><span class="line">            <span class="comment">// event.detail 的值为当前选中项的索引</span></span><br><span class="line">            <span class="comment">//this.setData(&#123; active: event.detail &#125;)</span></span><br><span class="line">            <span class="variable language_">this</span>.<span class="title function_">updateActive</span>(event.<span class="property">detail</span>)</span><br><span class="line">            wx.<span class="title function_">switchTab</span>(&#123;</span><br><span class="line">                <span class="attr">url</span>: <span class="variable language_">this</span>.<span class="property">data</span>.<span class="property">list</span>[event.<span class="property">detail</span>].<span class="property">pagePath</span></span><br><span class="line">            &#125;)</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>

</article><div class="post-copyright"><div class="post-copyright__author"><span class="post-copyright-meta"><i class="fas fa-circle-user fa-fw"></i>Author: </span><span class="post-copyright-info"><a href="https://zhangjunqigithub.github.io/blog">JQ Zhang</a></span></div><div class="post-copyright__type"><span class="post-copyright-meta"><i class="fas fa-square-arrow-up-right fa-fw"></i>Link: </span><span class="post-copyright-info"><a href="https://zhangjunqigithub.github.io/blog/2023/03/18/%E5%BE%AE%E4%BF%A1%E5%B0%8F%E7%A8%8B%E5%BA%8F/">https://zhangjunqigithub.github.io/blog/2023/03/18/%E5%BE%AE%E4%BF%A1%E5%B0%8F%E7%A8%8B%E5%BA%8F/</a></span></div><div class="post-copyright__notice"><span class="post-copyright-meta"><i class="fas fa-circle-exclamation fa-fw"></i>Copyright Notice: </span><span class="post-copyright-info">All articles in this blog are licensed under <a target="_blank" rel="noopener" href="https://creativecommons.org/licenses/by-nc-sa/4.0/">CC BY-NC-SA 4.0</a> unless stating additionally.</span></div></div><div class="tag_share"><div class="post-meta__tag-list"><a class="post-meta__tags" href="/blog/tags/%E5%BE%AE%E4%BF%A1%E5%B0%8F%E7%A8%8B%E5%BA%8F/">微信小程序</a></div><div class="post_share"><div class="social-share" data-image="https://tse3-mm.cn.bing.net/th/id/OIP-C.LOf71BExw3XVrRR4z18bmAHaHa?pid=ImgDet&amp;rs=1" data-sites="facebook,twitter,wechat,weibo,qq"></div><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/butterfly-extsrc@1.1.3/sharejs/dist/css/share.min.css" media="print" onload="this.media='all'"><script src="https://cdn.jsdelivr.net/npm/butterfly-extsrc@1.1.3/sharejs/dist/js/social-share.min.js" defer></script></div></div><nav class="pagination-post" id="pagination"><div class="prev-post pull-left"><a href="/blog/2023/03/18/git%E5%9F%BA%E6%9C%AC%E4%BD%BF%E7%94%A8/" title="git基本使用"><img class="cover" src="https://tangjiusheng.com/d/file/image/20190724/1563935209915315.jpg" onerror="onerror=null;src='/blog/img/404.jpg'" alt="cover of previous post"><div class="pagination-info"><div class="label">Previous</div><div class="prev_info">git基本使用</div></div></a></div><div class="next-post pull-right"><a href="/blog/2023/03/14/node.js%E5%9F%BA%E7%A1%80/" title="node.js基础"><img class="cover" src="https://icon-library.com/images/node-js-icon/node-js-icon-15.jpg" onerror="onerror=null;src='/blog/img/404.jpg'" alt="cover of next post"><div class="pagination-info"><div class="label">Next</div><div class="next_info">node.js基础</div></div></a></div></nav></div><div class="aside-content" id="aside-content"><div class="card-widget card-info"><div class="is-center"><div class="avatar-img"><img src="https://raw.githubusercontent.com/ZhangjunqiGithub/picture/master/blogAvator.jpg" onerror="this.onerror=null;this.src='/blog/img/friend_404.gif'" alt="avatar"/></div><div class="author-info__name">JQ Zhang</div><div class="author-info__description"></div></div><div class="card-info-data site-data is-center"><a href="/blog/archives/"><div class="headline">Articles</div><div class="length-num">29</div></a><a href="/blog/tags/"><div class="headline">Tags</div><div class="length-num">29</div></a><a href="/blog/categories/"><div class="headline">Categories</div><div class="length-num">29</div></a></div><a id="card-info-btn" target="_blank" rel="noopener" href="https://github.com/ZhangjunqiGithub/blog.git"><i class="fab fa-github"></i><span>Follow Me</span></a><div class="card-info-social-icons is-center"><a class="social-icon" href="https://github.com/ZhangjunqiGithub/blog.git" target="_blank" title="Github"><i class="fab fa-github" style="color: #24292e;"></i></a></div></div><div class="card-widget card-announcement"><div class="item-headline"><i class="fas fa-bullhorn fa-shake"></i><span>Announcement</span></div><div class="announcement_content">This is my Blog</div></div><div class="sticky_layout"><div class="card-widget" id="card-toc"><div class="item-headline"><i class="fas fa-stream"></i><span>Contents</span><span class="toc-percentage"></span></div><div class="toc-content"><ol class="toc"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E8%AE%BE%E7%BD%AE%E4%BB%A3%E7%90%86"><span class="toc-number">1.</span> <span class="toc-text">设置代理</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%88%9B%E5%BB%BA%E5%B0%8F%E7%A8%8B%E5%BA%8F%E9%A1%B9%E7%9B%AE"><span class="toc-number">2.</span> <span class="toc-text">创建小程序项目</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E9%A1%B9%E7%9B%AE%E7%BB%93%E6%9E%84"><span class="toc-number">3.</span> <span class="toc-text">项目结构</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%96%B0%E5%BB%BA%E5%B0%8F%E7%A8%8B%E5%BA%8F%E9%A1%B5%E9%9D%A2"><span class="toc-number">4.</span> <span class="toc-text">新建小程序页面</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%BF%AE%E6%94%B9%E9%A1%B9%E7%9B%AE%E9%A6%96%E9%A1%B5"><span class="toc-number">5.</span> <span class="toc-text">修改项目首页</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#wxss%E5%92%8Ccss%E7%9A%84%E5%8C%BA%E5%88%AB"><span class="toc-number">6.</span> <span class="toc-text">wxss和css的区别</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%B8%B8%E7%94%A8%E7%9A%84%E8%A7%86%E5%9B%BE%E5%AE%B9%E5%99%A8%E7%B1%BB%E7%BB%84%E4%BB%B6"><span class="toc-number">7.</span> <span class="toc-text">常用的视图容器类组件</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%B8%B8%E7%94%A8%E7%9A%84%E5%9F%BA%E7%A1%80%E5%86%85%E5%AE%B9%E7%BB%84%E4%BB%B6"><span class="toc-number">8.</span> <span class="toc-text">常用的基础内容组件</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%B0%8F%E7%A8%8B%E5%BA%8FAPI%E7%9A%843%E5%A4%A7%E5%88%86%E7%B1%BB"><span class="toc-number">9.</span> <span class="toc-text">小程序API的3大分类</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%B0%8F%E7%A8%8B%E5%BA%8F%E5%8F%91%E5%B8%83%E4%B8%8A%E7%BA%BF"><span class="toc-number">10.</span> <span class="toc-text">小程序发布上线</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%95%B0%E6%8D%AE%E7%BB%91%E5%AE%9A"><span class="toc-number">11.</span> <span class="toc-text">数据绑定</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%B8%89%E5%85%83%E8%BF%90%E7%AE%97%E7%AC%A6"><span class="toc-number">12.</span> <span class="toc-text">三元运算符</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%B8%B8%E7%94%A8%E7%9A%84%E4%BA%8B%E4%BB%B6"><span class="toc-number">13.</span> <span class="toc-text">常用的事件</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%BA%8B%E4%BB%B6%E5%AF%B9%E8%B1%A1%E7%9A%84%E5%B1%9E%E6%80%A7%E5%88%97%E8%A1%A8"><span class="toc-number">14.</span> <span class="toc-text">事件对象的属性列表</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#bindtap%E7%9A%84%E8%AF%AD%E6%B3%95%E6%A0%BC%E5%BC%8F"><span class="toc-number">15.</span> <span class="toc-text">bindtap的语法格式</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%9C%A8%E4%BA%8B%E4%BB%B6%E5%A4%84%E7%90%86%E5%87%BD%E6%95%B0%E4%B8%AD%E4%B8%BAdata%E4%B8%AD%E7%9A%84%E6%95%B0%E6%8D%AE%E8%B5%8B%E5%80%BC"><span class="toc-number">16.</span> <span class="toc-text">在事件处理函数中为data中的数据赋值</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%BA%8B%E4%BB%B6%E4%BC%A0%E5%8F%82%E4%B8%8E%E6%95%B0%E6%8D%AE%E5%90%8C%E6%AD%A5"><span class="toc-number">17.</span> <span class="toc-text">事件传参与数据同步</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%9D%A1%E4%BB%B6%E6%B8%B2%E6%9F%93"><span class="toc-number">18.</span> <span class="toc-text">条件渲染</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#wx-if"><span class="toc-number">18.1.</span> <span class="toc-text">wx:if</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E7%BB%93%E5%90%88%E4%BD%BF%E7%94%A8wx-if"><span class="toc-number">18.2.</span> <span class="toc-text">结合&lt;block&gt;使用wx:if</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#hidden"><span class="toc-number">18.3.</span> <span class="toc-text">hidden</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#wx-if-%E4%B8%8E-hidden-%E7%9A%84%E5%AF%B9%E6%AF%94"><span class="toc-number">18.4.</span> <span class="toc-text">wx:if 与 hidden 的对比</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%88%97%E8%A1%A8%E6%B8%B2%E6%9F%93"><span class="toc-number">19.</span> <span class="toc-text">列表渲染</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#wx-for"><span class="toc-number">19.1.</span> <span class="toc-text">wx:for</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%89%8B%E5%8A%A8%E6%8C%87%E5%AE%9A%E7%B4%A2%E5%BC%95%E5%92%8C%E5%BD%93%E5%89%8D%E9%A1%B9%E7%9A%84%E5%8F%98%E9%87%8F%E5%90%8D"><span class="toc-number">19.2.</span> <span class="toc-text">手动指定索引和当前项的变量名</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#wx-key%E7%9A%84%E4%BD%BF%E7%94%A8"><span class="toc-number">19.3.</span> <span class="toc-text">wx:key的使用</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#wxss"><span class="toc-number">20.</span> <span class="toc-text">wxss</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#wxss%E4%B8%AD%E7%9A%84rpx%E5%8D%95%E4%BD%8D"><span class="toc-number">20.1.</span> <span class="toc-text">wxss中的rpx单位</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#wxss%E5%85%A8%E5%B1%80%E6%A0%B7%E5%BC%8F%E4%B8%8E%E5%B1%80%E9%83%A8%E6%A0%B7%E5%BC%8F"><span class="toc-number">20.2.</span> <span class="toc-text">wxss全局样式与局部样式</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%85%A8%E5%B1%80%E9%85%8D%E7%BD%AE"><span class="toc-number">21.</span> <span class="toc-text">全局配置</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#tabBar%E7%BB%93%E7%82%B9%E7%9A%84%E9%85%8D%E7%BD%AE%E9%A1%B9"><span class="toc-number">21.1.</span> <span class="toc-text">tabBar结点的配置项</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%AF%8F%E4%B8%AAtab%E9%A1%B9%E7%9A%84%E9%85%8D%E7%BD%AE%E9%80%89%E9%A1%B9"><span class="toc-number">21.2.</span> <span class="toc-text">每个tab项的配置选项</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E9%A1%B5%E9%9D%A2%E9%85%8D%E7%BD%AE%E5%92%8C%E5%85%A8%E5%B1%80%E9%85%8D%E7%BD%AE%E7%9A%84%E5%85%B3%E7%B3%BB"><span class="toc-number">21.3.</span> <span class="toc-text">页面配置和全局配置的关系</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%B0%8F%E7%A8%8B%E5%BA%8F%E4%B8%AD%E7%BD%91%E7%BB%9C%E6%95%B0%E6%8D%AE%E8%AF%B7%E6%B1%82%E7%9A%84%E9%99%90%E5%88%B6"><span class="toc-number">22.</span> <span class="toc-text">小程序中网络数据请求的限制</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%8F%91%E8%B5%B7GET-POST%E8%AF%B7%E6%B1%82"><span class="toc-number">23.</span> <span class="toc-text">发起GET&#x2F;POST请求</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%9C%A8%E9%A1%B5%E9%9D%A2%E5%88%9A%E5%8A%A0%E8%BD%BD%E6%97%B6%E8%AF%B7%E6%B1%82%E6%95%B0%E6%8D%AE"><span class="toc-number">24.</span> <span class="toc-text">在页面刚加载时请求数据</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E8%B7%B3%E8%BF%87request%E5%90%88%E6%B3%95%E5%9F%9F%E5%90%8D%E6%A0%A1%E9%AA%8C"><span class="toc-number">25.</span> <span class="toc-text">跳过request合法域名校验</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%85%B3%E4%BA%8E%E8%B7%A8%E5%9F%9F%E5%92%8CAjax%E7%9A%84%E8%AF%B4%E6%98%8E"><span class="toc-number">26.</span> <span class="toc-text">关于跨域和Ajax的说明</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E9%A1%B5%E9%9D%A2%E5%AF%BC%E8%88%AA"><span class="toc-number">27.</span> <span class="toc-text">页面导航</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%A3%B0%E6%98%8E%E5%BC%8F%E5%AF%BC%E8%88%AA"><span class="toc-number">27.1.</span> <span class="toc-text">声明式导航</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E7%BC%96%E7%A8%8B%E5%BC%8F%E5%AF%BC%E8%88%AA"><span class="toc-number">27.2.</span> <span class="toc-text">编程式导航</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%AF%BC%E8%88%AA%E4%BC%A0%E5%8F%82"><span class="toc-number">28.</span> <span class="toc-text">导航传参</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%A3%B0%E6%98%8E%E5%BC%8F%E5%AF%BC%E8%88%AA%E4%BC%A0%E5%8F%82"><span class="toc-number">28.1.</span> <span class="toc-text">声明式导航传参</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E7%BC%96%E7%A8%8B%E5%BC%8F%E5%AF%BC%E8%88%AA%E4%BC%A0%E5%8F%82"><span class="toc-number">28.2.</span> <span class="toc-text">编程式导航传参</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%9C%A8onLoad%E4%B8%AD%E6%8E%A5%E6%94%B6%E5%AF%BC%E8%88%AA%E5%8F%82%E6%95%B0"><span class="toc-number">28.3.</span> <span class="toc-text">在onLoad中接收导航参数</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%B8%8B%E6%8B%89%E5%88%B7%E6%96%B0"><span class="toc-number">29.</span> <span class="toc-text">下拉刷新</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%90%AF%E7%94%A8%E4%B8%8B%E6%8B%89%E5%88%B7%E6%96%B0%E7%9A%84%E4%B8%A4%E7%A7%8D%E6%96%B9%E5%BC%8F%EF%BC%9A"><span class="toc-number">29.1.</span> <span class="toc-text">启用下拉刷新的两种方式：</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E9%85%8D%E7%BD%AE%E4%B8%8B%E6%8B%89%E5%88%B7%E6%96%B0%E7%AA%97%E5%8F%A3%E7%9A%84%E6%A0%B7%E5%BC%8F"><span class="toc-number">29.2.</span> <span class="toc-text">配置下拉刷新窗口的样式</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E7%9B%91%E5%90%AC%E9%A1%B5%E9%9D%A2%E7%9A%84%E4%B8%8B%E6%8B%89%E5%88%B7%E6%96%B0%E4%BA%8B%E4%BB%B6"><span class="toc-number">29.3.</span> <span class="toc-text">监听页面的下拉刷新事件</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%9B%91%E5%90%AC%E9%A1%B5%E9%9D%A2%E7%9A%84%E4%B8%8A%E6%8B%89%E8%A7%A6%E5%BA%95%E4%BA%8B%E4%BB%B6"><span class="toc-number">30.</span> <span class="toc-text">监听页面的上拉触底事件</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E9%85%8D%E7%BD%AE%E4%B8%8A%E6%8B%89%E5%A4%84%E7%90%86%E8%B7%9D%E7%A6%BB"><span class="toc-number">30.1.</span> <span class="toc-text">配置上拉处理距离</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%B0%8F%E7%A8%8B%E5%BA%8F%E7%9A%84%E7%94%9F%E5%91%BD%E5%91%A8%E6%9C%9F%E5%87%BD%E6%95%B0"><span class="toc-number">31.</span> <span class="toc-text">小程序的生命周期函数</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%BA%94%E7%94%A8%E7%9A%84%E7%94%9F%E5%91%BD%E5%91%A8%E6%9C%9F%E5%87%BD%E6%95%B0"><span class="toc-number">31.1.</span> <span class="toc-text">应用的生命周期函数</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E9%A1%B5%E9%9D%A2%E7%9A%84%E7%94%9F%E5%91%BD%E5%91%A8%E6%9C%9F%E5%87%BD%E6%95%B0"><span class="toc-number">31.2.</span> <span class="toc-text">页面的生命周期函数</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#WXS%E8%84%9A%E6%9C%AC"><span class="toc-number">32.</span> <span class="toc-text">WXS脚本</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%86%85%E5%B5%8Cwxs%E8%84%9A%E6%9C%AC"><span class="toc-number">32.1.</span> <span class="toc-text">内嵌wxs脚本</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%AE%9A%E4%B9%89%E5%A4%96%E8%81%94%E7%9A%84wxs%E8%84%9A%E6%9C%AC"><span class="toc-number">32.2.</span> <span class="toc-text">定义外联的wxs脚本</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E4%BD%BF%E7%94%A8%E5%A4%96%E8%81%94%E7%9A%84wxs%E8%84%9A%E6%9C%AC"><span class="toc-number">32.3.</span> <span class="toc-text">使用外联的wxs脚本</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#wxs%E7%9A%84%E7%89%B9%E7%82%B9"><span class="toc-number">32.4.</span> <span class="toc-text">wxs的特点</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E8%87%AA%E5%AE%9A%E4%B9%89%E7%BB%84%E4%BB%B6"><span class="toc-number">33.</span> <span class="toc-text">自定义组件</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%88%9B%E5%BB%BA%E7%BB%84%E4%BB%B6"><span class="toc-number">33.1.</span> <span class="toc-text">创建组件</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%BC%95%E7%94%A8%E7%BB%84%E4%BB%B6"><span class="toc-number">33.2.</span> <span class="toc-text">引用组件</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#%E5%B1%80%E9%83%A8%E5%BC%95%E7%94%A8%E7%BB%84%E4%BB%B6"><span class="toc-number">33.2.1.</span> <span class="toc-text">局部引用组件</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E5%85%A8%E5%B1%80%E5%BC%95%E7%94%A8%E7%BB%84%E4%BB%B6"><span class="toc-number">33.2.2.</span> <span class="toc-text">全局引用组件</span></a></li></ol></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E7%BB%84%E4%BB%B6%E5%92%8C%E9%A1%B5%E9%9D%A2%E7%9A%84%E5%8C%BA%E5%88%AB"><span class="toc-number">33.3.</span> <span class="toc-text">组件和页面的区别</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E8%87%AA%E5%AE%9A%E4%B9%89%E7%BB%84%E4%BB%B6%E6%A0%B7%E5%BC%8F"><span class="toc-number">34.</span> <span class="toc-text">自定义组件样式</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E7%BB%84%E4%BB%B6%E6%A0%B7%E5%BC%8F%E9%9A%94%E7%A6%BB"><span class="toc-number">34.1.</span> <span class="toc-text">组件样式隔离</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E7%BB%84%E4%BB%B6%E6%A0%B7%E5%BC%8F%E9%9A%94%E7%A6%BB%E7%9A%84%E6%B3%A8%E6%84%8F%E7%82%B9"><span class="toc-number">34.2.</span> <span class="toc-text">组件样式隔离的注意点</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E4%BF%AE%E6%94%B9%E7%BB%84%E4%BB%B6%E7%9A%84%E6%A0%B7%E5%BC%8F%E9%9A%94%E7%A6%BB%E9%80%89%E9%A1%B9"><span class="toc-number">34.3.</span> <span class="toc-text">修改组件的样式隔离选项</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E8%87%AA%E5%AE%9A%E4%B9%89%E7%BB%84%E4%BB%B6%E4%B8%AD%E7%9A%84methods%E6%96%B9%E6%B3%95"><span class="toc-number">35.</span> <span class="toc-text">自定义组件中的methods方法</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E8%87%AA%E5%AE%9A%E4%B9%89%E7%BB%84%E4%BB%B6%E7%9A%84properties%E5%B1%9E%E6%80%A7"><span class="toc-number">36.</span> <span class="toc-text">自定义组件的properties属性</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#data%E5%92%8Cproperties%E7%9A%84%E5%8C%BA%E5%88%AB"><span class="toc-number">36.1.</span> <span class="toc-text">data和properties的区别</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E8%87%AA%E5%AE%9A%E4%B9%89%E7%BB%84%E4%BB%B6%E7%9A%84%E4%BA%8B%E4%BB%B6%E7%9B%91%E5%90%AC%E5%99%A8"><span class="toc-number">37.</span> <span class="toc-text">自定义组件的事件监听器</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%95%B0%E6%8D%AE%E7%9B%91%E5%90%AC%E5%99%A8%E7%9A%84%E5%9F%BA%E6%9C%AC%E7%94%A8%E6%B3%95"><span class="toc-number">38.</span> <span class="toc-text">数据监听器的基本用法</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%9B%91%E5%90%AC%E5%AF%B9%E8%B1%A1%E5%B1%9E%E6%80%A7%E7%9A%84%E5%8F%98%E5%8C%96"><span class="toc-number">39.</span> <span class="toc-text">监听对象属性的变化</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%BA%AF%E6%95%B0%E6%8D%AE%E5%AD%97%E6%AE%B5"><span class="toc-number">40.</span> <span class="toc-text">纯数据字段</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E4%BD%BF%E7%94%A8%E8%A7%84%E5%88%99"><span class="toc-number">40.1.</span> <span class="toc-text">使用规则</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E8%87%AA%E5%AE%9A%E4%B9%89%E7%BB%84%E4%BB%B6%E7%9A%84%E5%A3%B0%E6%98%8E%E5%91%A8%E6%9C%9F%E5%87%BD%E6%95%B0"><span class="toc-number">41.</span> <span class="toc-text">自定义组件的声明周期函数</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E8%87%AA%E5%AE%9A%E4%B9%89%E7%BB%84%E4%BB%B6%E4%B8%BB%E8%A6%81%E7%9A%84%E7%94%9F%E5%91%BD%E5%91%A8%E6%9C%9F%E5%87%BD%E6%95%B0"><span class="toc-number">41.1.</span> <span class="toc-text">自定义组件主要的生命周期函数</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E8%87%AA%E5%AE%9A%E4%B9%89%E7%BB%84%E4%BB%B6%E7%94%9F%E5%91%BD%E5%91%A8%E6%9C%9F%E5%87%BD%E6%95%B0%E7%9A%84%E4%BD%BF%E7%94%A8"><span class="toc-number">41.2.</span> <span class="toc-text">自定义组件生命周期函数的使用</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%BB%84%E4%BB%B6%E6%89%80%E5%9C%A8%E9%A1%B5%E9%9D%A2%E7%9A%84%E7%94%9F%E5%91%BD%E5%91%A8%E6%9C%9F"><span class="toc-number">42.</span> <span class="toc-text">组件所在页面的生命周期</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#pageLifetimes%E7%BB%93%E7%82%B9"><span class="toc-number">42.1.</span> <span class="toc-text">pageLifetimes结点</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%8F%92%E6%A7%BD"><span class="toc-number">43.</span> <span class="toc-text">插槽</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%8D%95%E4%B8%AA%E6%8F%92%E6%A7%BD"><span class="toc-number">43.1.</span> <span class="toc-text">单个插槽</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%90%AF%E7%94%A8%E5%A4%9A%E4%B8%AA%E6%8F%92%E6%A7%BD"><span class="toc-number">43.2.</span> <span class="toc-text">启用多个插槽</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%AE%9A%E4%B9%89%E5%A4%9A%E4%B8%AA%E6%8F%92%E6%A7%BD"><span class="toc-number">43.3.</span> <span class="toc-text">定义多个插槽</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%88%B6%E5%AD%90%E7%BB%84%E4%BB%B6%E4%B9%8B%E9%97%B4%E7%9A%84%E9%80%9A%E4%BF%A1"><span class="toc-number">44.</span> <span class="toc-text">父子组件之间的通信</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#3%E7%A7%8D%E9%80%9A%E4%BF%A1%E6%96%B9%E5%BC%8F"><span class="toc-number">44.1.</span> <span class="toc-text">3种通信方式</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#%E5%B1%9E%E6%80%A7%E7%BB%91%E5%AE%9A"><span class="toc-number">44.1.1.</span> <span class="toc-text">属性绑定</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E4%BA%8B%E4%BB%B6%E7%BB%91%E5%AE%9A"><span class="toc-number">44.1.2.</span> <span class="toc-text">事件绑定</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E8%8E%B7%E5%8F%96%E7%BB%84%E4%BB%B6%E5%AE%9E%E4%BE%8B"><span class="toc-number">44.1.3.</span> <span class="toc-text">获取组件实例</span></a></li></ol></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#behaviors%E7%9A%84%E4%BD%BF%E7%94%A8"><span class="toc-number">45.</span> <span class="toc-text">behaviors的使用</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#behaviors%E7%9A%84%E5%B7%A5%E4%BD%9C%E6%96%B9%E5%BC%8F"><span class="toc-number">45.1.</span> <span class="toc-text">behaviors的工作方式</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%88%9B%E5%BB%BAbehavior"><span class="toc-number">45.2.</span> <span class="toc-text">创建behavior</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%AF%BC%E5%85%A5%E5%B9%B6%E4%BD%BF%E7%94%A8behavior"><span class="toc-number">45.3.</span> <span class="toc-text">导入并使用behavior</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#behavior%E4%B8%AD%E6%89%80%E6%9C%89%E5%8F%AF%E7%94%A8%E7%9A%84%E7%BB%93%E7%82%B9"><span class="toc-number">45.4.</span> <span class="toc-text">behavior中所有可用的结点</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%90%8C%E5%90%8D%E5%AD%97%E6%AE%B5%E7%9A%84%E8%A6%86%E7%9B%96%E5%92%8C%E7%BB%84%E5%90%88%E8%A7%84%E5%88%99"><span class="toc-number">45.5.</span> <span class="toc-text">同名字段的覆盖和组合规则</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%BD%BF%E7%94%A8npm%E5%8C%85"><span class="toc-number">46.</span> <span class="toc-text">使用npm包</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%B0%8F%E7%A8%8B%E5%BA%8F%E5%AF%B9npm%E7%9A%84%E6%94%AF%E6%8C%81%E4%B8%8E%E9%99%90%E5%88%B6"><span class="toc-number">46.1.</span> <span class="toc-text">小程序对npm的支持与限制</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#Vant-Weapp"><span class="toc-number">46.2.</span> <span class="toc-text">Vant Weapp</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%AE%89%E8%A3%85Vant%E7%BB%84%E4%BB%B6%E5%BA%93"><span class="toc-number">46.3.</span> <span class="toc-text">安装Vant组件库</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E4%BD%BF%E7%94%A8Vant%E7%BB%84%E4%BB%B6"><span class="toc-number">46.4.</span> <span class="toc-text">使用Vant组件</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#CSS%E5%8F%98%E9%87%8F%E7%9A%84%E4%BD%BF%E7%94%A8"><span class="toc-number">47.</span> <span class="toc-text">CSS变量的使用</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%AE%9A%E5%88%B6%E5%85%A8%E5%B1%80%E4%B8%BB%E9%A2%98%E6%A0%B7%E5%BC%8F"><span class="toc-number">47.1.</span> <span class="toc-text">定制全局主题样式</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%B0%8F%E7%A8%8B%E5%BA%8FAPI%E7%9A%84promise%E5%8C%96"><span class="toc-number">48.</span> <span class="toc-text">小程序API的promise化</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%9F%BA%E4%BA%8E%E5%9B%9E%E8%B0%83%E5%87%BD%E6%95%B0%E7%9A%84%E5%BC%82%E6%AD%A5API%E7%9A%84%E7%BC%BA%E7%82%B9"><span class="toc-number">48.1.</span> <span class="toc-text">基于回调函数的异步API的缺点</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E4%BB%80%E4%B9%88%E6%98%AFAPI-Promise%E5%8C%96"><span class="toc-number">48.2.</span> <span class="toc-text">什么是API Promise化</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%AE%9E%E7%8E%B0API-Promise%E5%8C%96"><span class="toc-number">48.3.</span> <span class="toc-text">实现API Promise化</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E8%B0%83%E7%94%A8Promise%E5%8C%96%E4%B9%8B%E5%90%8E%E7%9A%84%E5%BC%82%E6%AD%A5API"><span class="toc-number">48.4.</span> <span class="toc-text">调用Promise化之后的异步API</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%85%A8%E5%B1%80%E6%95%B0%E6%8D%AE%E5%85%B1%E4%BA%AB"><span class="toc-number">49.</span> <span class="toc-text">全局数据共享</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%AE%89%E8%A3%85MobX%E7%9B%B8%E5%85%B3%E7%9A%84%E5%8C%85"><span class="toc-number">49.1.</span> <span class="toc-text">安装MobX相关的包</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%B0%8F%E7%A8%8B%E5%BA%8F%E4%B8%AD%E7%9A%84%E5%85%A8%E5%B1%80%E6%95%B0%E6%8D%AE%E5%85%B1%E4%BA%AB%E6%96%B9%E6%A1%88"><span class="toc-number">49.2.</span> <span class="toc-text">小程序中的全局数据共享方案</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%B0%86Store%E4%B8%AD%E7%9A%84%E6%88%90%E5%91%98%E7%BB%91%E5%AE%9A%E5%88%B0%E9%A1%B5%E9%9D%A2%E4%B8%AD"><span class="toc-number">49.3.</span> <span class="toc-text">将Store中的成员绑定到页面中</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%9C%A8%E9%A1%B5%E9%9D%A2%E4%B8%8A%E4%BD%BF%E7%94%A8Store%E4%B8%AD%E7%9A%84%E6%88%90%E5%91%98"><span class="toc-number">49.4.</span> <span class="toc-text">在页面上使用Store中的成员</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%B0%86Store%E4%B8%AD%E7%9A%84%E6%88%90%E5%91%98%E7%BB%91%E5%AE%9A%E5%88%B0%E7%BB%84%E4%BB%B6%E4%B8%AD"><span class="toc-number">49.5.</span> <span class="toc-text">将Store中的成员绑定到组件中</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%88%86%E5%8C%85"><span class="toc-number">50.</span> <span class="toc-text">分包</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%88%86%E5%8C%85%E5%89%8D%E9%A1%B9%E7%9B%AE%E7%9A%84%E6%9E%84%E6%88%90"><span class="toc-number">50.1.</span> <span class="toc-text">分包前项目的构成</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%88%86%E5%8C%85%E5%90%8E%E9%A1%B9%E7%9B%AE%E7%9A%84%E6%9E%84%E6%88%90"><span class="toc-number">50.2.</span> <span class="toc-text">分包后项目的构成</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%88%86%E5%8C%85%E7%9A%84%E5%8A%A0%E8%BD%BD%E8%A7%84%E5%88%99"><span class="toc-number">50.3.</span> <span class="toc-text">分包的加载规则</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%88%86%E5%8C%85%E7%9A%84%E4%BD%93%E7%A7%AF%E9%99%90%E5%88%B6"><span class="toc-number">50.4.</span> <span class="toc-text">分包的体积限制</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%88%86%E5%8C%85%E7%9A%84%E4%BD%BF%E7%94%A8"><span class="toc-number">50.5.</span> <span class="toc-text">分包的使用</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%89%93%E5%8C%85%E5%8E%9F%E5%88%99"><span class="toc-number">50.6.</span> <span class="toc-text">打包原则</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%BC%95%E7%94%A8%E5%8E%9F%E5%88%99"><span class="toc-number">50.7.</span> <span class="toc-text">引用原则</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%8B%AC%E7%AB%8B%E5%88%86%E5%8C%85"><span class="toc-number">51.</span> <span class="toc-text">独立分包</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E8%87%AA%E5%AE%9A%E4%B9%89tabBar"><span class="toc-number">52.</span> <span class="toc-text">自定义tabBar</span></a></li></ol></div></div><div class="card-widget card-recent-post"><div class="item-headline"><i class="fas fa-history"></i><span>Recent Post</span></div><div class="aside-list"><div class="aside-list-item"><a class="thumbnail" href="/blog/2024/08/23/MongoDB/" title="MongoDB基础"><img src="https://tse3-mm.cn.bing.net/th/id/OIP-C.Ae6KuLbSCjSEbFBy2o2uiAHaHa?rs=1&amp;pid=ImgDetMain" onerror="this.onerror=null;this.src='/blog/img/404.jpg'" alt="MongoDB基础"/></a><div class="content"><a class="title" href="/blog/2024/08/23/MongoDB/" title="MongoDB基础">MongoDB基础</a><time datetime="2024-08-23T07:16:19.974Z" title="Created 2024-08-23 15:16:19">2024-08-23</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/blog/2024/08/22/nextJS/" title="Next.js基础"><img src="https://tse3-mm.cn.bing.net/th/id/OIP-C.KLv8KFiUKd4HY4lTD5UVhgHaC-?w=323&amp;h=180&amp;c=7&amp;r=0&amp;o=5&amp;dpr=1.3&amp;pid=1.7" onerror="this.onerror=null;this.src='/blog/img/404.jpg'" alt="Next.js基础"/></a><div class="content"><a class="title" href="/blog/2024/08/22/nextJS/" title="Next.js基础">Next.js基础</a><time datetime="2024-08-21T16:00:00.000Z" title="Created 2024-08-22 00:00:00">2024-08-22</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/blog/2024/08/22/tailwindCSS/" title="tailwind CSS基础"><img src="https://tse4-mm.cn.bing.net/th/id/OIP-C.22tPt9bi1FRyjOYQI8irPQHaD4?w=246&amp;h=180&amp;c=7&amp;r=0&amp;o=5&amp;dpr=1.3&amp;pid=1.7" onerror="this.onerror=null;this.src='/blog/img/404.jpg'" alt="tailwind CSS基础"/></a><div class="content"><a class="title" href="/blog/2024/08/22/tailwindCSS/" title="tailwind CSS基础">tailwind CSS基础</a><time datetime="2024-08-21T16:00:00.000Z" title="Created 2024-08-22 00:00:00">2024-08-22</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/blog/2024/08/18/whistle%E9%85%8D%E7%BD%AE/" title="whistle代理的基本使用"><img src="https://user-images.githubusercontent.com/11450939/122700870-b0de4100-d27e-11eb-8d2a-46e352b49727.png" onerror="this.onerror=null;this.src='/blog/img/404.jpg'" alt="whistle代理的基本使用"/></a><div class="content"><a class="title" href="/blog/2024/08/18/whistle%E9%85%8D%E7%BD%AE/" title="whistle代理的基本使用">whistle代理的基本使用</a><time datetime="2024-08-17T16:00:00.000Z" title="Created 2024-08-18 00:00:00">2024-08-18</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/blog/2024/08/01/react%E5%88%9D%E5%AD%A6%E5%B8%B8%E8%A7%81%E9%97%AE%E9%A2%98/" title="react初学常见问题"><img src="https://tse1-mm.cn.bing.net/th/id/OIP-C.SotMiIQcjpM3eBVDEkbS-wHaD8?w=337&amp;h=180&amp;c=7&amp;r=0&amp;o=5&amp;dpr=1.3&amp;pid=1.7" onerror="this.onerror=null;this.src='/blog/img/404.jpg'" alt="react初学常见问题"/></a><div class="content"><a class="title" href="/blog/2024/08/01/react%E5%88%9D%E5%AD%A6%E5%B8%B8%E8%A7%81%E9%97%AE%E9%A2%98/" title="react初学常见问题">react初学常见问题</a><time datetime="2024-07-31T16:00:00.000Z" title="Created 2024-08-01 00:00:00">2024-08-01</time></div></div></div></div></div></div></main><footer id="footer"><div id="footer-wrap"><div class="copyright">&copy;2020 - 2024 By JQ Zhang</div><div class="framework-info"><span>Framework </span><a target="_blank" rel="noopener" href="https://hexo.io">Hexo</a><span class="footer-separator">|</span><span>Theme </span><a target="_blank" rel="noopener" href="https://github.com/jerryc127/hexo-theme-butterfly">Butterfly</a></div></div></footer></div><div id="rightside"><div id="rightside-config-hide"><button id="readmode" type="button" title="Read Mode"><i class="fas fa-book-open"></i></button><button id="darkmode" type="button" title="Toggle Between Light And Dark Mode"><i class="fas fa-adjust"></i></button><button id="hide-aside-btn" type="button" title="Toggle between Single-column and Double-column"><i class="fas fa-arrows-alt-h"></i></button></div><div id="rightside-config-show"><button id="rightside-config" type="button" title="Setting"><i class="fas fa-cog fa-spin"></i></button><button class="close" id="mobile-toc-button" type="button" title="Table Of Contents"><i class="fas fa-list-ul"></i></button><button id="go-up" type="button" title="Back To Top"><span class="scroll-percent"></span><i class="fas fa-arrow-up"></i></button></div></div><div><script src="/blog/js/utils.js?v=4.13.0"></script><script src="/blog/js/main.js?v=4.13.0"></script><script src="https://cdn.jsdelivr.net/npm/@fancyapps/ui@5.0.33/dist/fancybox/fancybox.umd.min.js"></script><div class="js-pjax"></div><canvas class="fireworks" mobile="false"></canvas><script src="https://cdn.jsdelivr.net/npm/butterfly-extsrc@1.1.3/dist/fireworks.min.js"></script><script defer="defer" id="ribbon" src="https://cdn.jsdelivr.net/npm/butterfly-extsrc@1.1.3/dist/canvas-ribbon.min.js" size="150" alpha="0.6" zIndex="-1" mobile="false" data-click="false"></script><script defer="defer" id="fluttering_ribbon" mobile="false" src="https://cdn.jsdelivr.net/npm/butterfly-extsrc@1.1.3/dist/canvas-fluttering-ribbon.min.js"></script><script id="canvas_nest" defer="defer" color="0,0,255" opacity="0.7" zIndex="-1" count="99" mobile="false" src="https://cdn.jsdelivr.net/npm/butterfly-extsrc@1.1.3/dist/canvas-nest.min.js"></script><script id="click-heart" src="https://cdn.jsdelivr.net/npm/butterfly-extsrc@1.1.3/dist/click-heart.min.js" async="async" mobile="false"></script><script async data-pjax src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script><div id="algolia-search"><div class="search-dialog"><nav class="search-nav"><span class="search-dialog-title">Search</span><button class="search-close-button"><i class="fas fa-times"></i></button></nav><div class="search-wrap"><div id="algolia-search-input"></div><hr/><div id="algolia-search-results"><div id="algolia-hits"></div><div id="algolia-pagination"></div><div id="algolia-info"><div class="algolia-stats"></div><div class="algolia-poweredBy"></div></div></div></div></div><div id="search-mask"></div><script src="https://cdn.jsdelivr.net/npm/algoliasearch@4.22.1/dist/algoliasearch-lite.umd.min.js"></script><script src="https://cdn.jsdelivr.net/npm/instantsearch.js@4.65.0/dist/instantsearch.production.min.js"></script><script src="/blog/js/search/algolia.js?v=4.13.0"></script></div></div></body></html>